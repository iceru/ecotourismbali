import{q as P,r as T,W as Q,j as t,a,F as X,b as Y}from"./app-985c7907.js";import{A as Z}from"./AdminSection-ec47c0ce.js";import{A as ee}from"./AdminLayout-f626f81b.js";import ae from"./BackTo-ac4ae393.js";import{S as m}from"./SelectInput-0f139266.js";import{B as f}from"./Button-74ae847b.js";import{l as j}from"./lodash-5cd7077f.js";import{m as le}from"./moment-10b46737.js";import{b as L}from"./BadgeColor-98fc907d.js";import{T as E}from"./TextInput-c22d7f28.js";import{u as te}from"./useTranslation-42b99a75.js";import"./logo-5e7252b7.js";import"./index-033d355d.js";import"./id-410e5203.js";import"./react-responsive-955be2d4.js";function we(){var x,w,N,y,b,C,D,k,I,R,A,S,B;const{member:e,categories:F,programs:$,verified_badges:z,remaining:O,dateAssessment:_,scores:u,lastSession:v,lastPayment:r}=P().props,{t:n}=te(),[o,h]=T.useState(!1),[g,U]=T.useState(e==null?void 0:e.status),{data:i,setData:c,post:W,processing:q,errors:ie,reset:M}=Q({category:(e==null?void 0:e.category_id)||"",program:(e==null?void 0:e.program_id)||"",verified_badge:(e==null?void 0:e.verified_badge_id)||"",total_payment:(e==null?void 0:e.total_payment)||"",status:(e==null?void 0:e.status)||null,invoice_no:(r==null?void 0:r.status_code)||null,invoice_item_text:(r==null?void 0:r.invoice_item_text)||null}),V=l=>{l.preventDefault(),W(route("admin.member.update",e==null?void 0:e.id),{onSuccess:()=>{M(),h(!1)}})};let G=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});const H=[{label:"Rp1",value:1},{label:"Rp1.000.000",value:1e6},{label:"Rp1.500.000",value:15e5},{label:"Rp2.000.000",value:2e6},{label:"Rp6.000.000",value:6e6},{label:"Rp12.000.000",value:12e6}],J=[{label:"Inactive",value:""},{label:"Waiting Approval",value:"waiting_approval"},{label:"Payment",value:"payment"},{label:"Active",value:"active"}],s=(l,p)=>t("div",{className:"flex flex-wrap mb-6",children:[a("div",{className:"w-full lg:w-1/4 mb-2 lg:mb-0 pr-6",children:a("div",{className:"font-bold",children:n(l)})}),a("div",{className:"w-full lg:w-3/4",children:p||"-"})]}),K=()=>{Y({url:"/admin/member/invoice/"+(e==null?void 0:e.id),method:"POST",responseType:"blob"}).then(l=>{const p=window.URL.createObjectURL(new Blob([l.data])),d=document.createElement("a");d.href=p,d.setAttribute("download",`invoice-${e==null?void 0:e.business_name}.pdf`),document.body.appendChild(d),d.click()})};return t(ee,{children:[a(ae,{link:"/admin/member/index",title:"back_to_list_members"}),a(Z,{children:t("div",{className:"flex mb-6 flex-wrap",children:[t("div",{className:"lg:w-4/5 pr-4",children:[t("div",{className:"flex flex-wrap items-center mb-6",children:[(e==null?void 0:e.image)&&a("img",{className:"mr-4 w-[100px]",src:`/storage/member/images/${e==null?void 0:e.image}`}),a("div",{className:"font-bold text-2xl",children:e==null?void 0:e.business_name})]}),t("div",{className:"flex gap-4",children:[a(f,{className:"mb-6",onClick:()=>h(!o),color:o?"gray":"primary",children:n(o?"close_edit_member":"edit_member")}),g!=null&&g.includes("active")||g==="payment"?a(f,{className:"mb-6",onClick:()=>K(),color:"secondary",children:"Download Invoice"}):null]}),t("form",{onSubmit:V,children:[o?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("status")}),a(m,{id:"status",name:"status",value:i==null?void 0:i.status,options:J,className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:l=>{c("status",l.target.value),U(l.target.value)}})]}):s("status",j.capitalize((x=e==null?void 0:e.status)==null?void 0:x.replace("_"," "))),o&&g==="payment"&&t(X,{children:[t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("invoice_no")}),a(E,{id:"invoice_no",name:"invoice_no",value:i==null?void 0:i.invoice_no,className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:l=>c("invoice_no",l.target.value)})]}),t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("invoice_item_text")}),a(E,{id:"invoice_item_text",name:"invoice_item_text",value:i==null?void 0:i.invoice_item_text,className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:l=>c("invoice_item_text",l.target.value)})]})]}),o&&!((w=e==null?void 0:e.status)!=null&&w.includes("active"))?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("total_payment")}),a(m,{id:"total_payment",name:"total_payment",value:i==null?void 0:i.total_payment,options:H,placeholder:"select_total_payment",className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:l=>c("total_payment",l.target.value)})]}):s("total_payment",G.format(e==null?void 0:e.total_payment)),s("email",e==null?void 0:e.user.email),s("address",e==null?void 0:e.address),s("phone",e==null?void 0:e.phone),s("website",e==null?void 0:e.website),s("business_name",e==null?void 0:e.business_name),s("business_type",(N=e==null?void 0:e.business_type)==null?void 0:N.name),o?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("category")}),a(m,{id:"category",name:"category",value:i==null?void 0:i.category,options:F,labelData:"name",placeholder:"select_category",valueData:"id",className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:l=>c("category",l.target.value)})]}):s("category",(y=e==null?void 0:e.category)==null?void 0:y.name),o?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("program")}),a(m,{id:"program",name:"program",value:i==null?void 0:i.program,options:$,className:"lg:w-3/4 w-full mt-2 lg:mt-0",placeholder:"select_program",labelData:"name",valueData:"id",onChange:l=>c("program",l.target.value)})]}):s("program",(b=e==null?void 0:e.program)==null?void 0:b.name),s("assessment_attempt",O),_&&s("assessment_expire",le(_).format("LL")),s("badge",(C=e==null?void 0:e.badge)==null?void 0:C.name),o?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("verified_badge")}),a(m,{id:"verified_badge",name:"verified_badge",value:i==null?void 0:i.verified_badge,options:z,className:"lg:w-3/4 w-full mt-2 lg:mt-0",labelData:"name",placeholder:"select_verify_badge",valueData:"id",onChange:l=>c("verified_badge",l.target.value)})]}):s("verified_badge",(D=e==null?void 0:e.verified_badge)==null?void 0:D.name),s("description",e==null?void 0:e.description),o&&a(f,{type:"submit",className:"mt-4",disabled:q,children:n("submit")})]})]}),t("div",{className:"lg:w-1/5 mx-auto flex lg:block gap-12 sticky top-0 lg:border-l pl-4 mt-10 lg:mt-0",children:[(e==null?void 0:e.verified_badge)&&t("div",{className:"flex flex-col items-center text-primary uppercase mb-6 pb-4 lg:border-b",children:[a("div",{children:a("img",{className:"max-h-[120px]",src:"/storage/badges/"+((k=e==null?void 0:e.verified_badge)==null?void 0:k.image)})}),t("div",{className:`font-bold mt-1 text-center ${L((I=e==null?void 0:e.badge)==null?void 0:I.name,"text")}`,children:[(R=e==null?void 0:e.verified_badge)==null?void 0:R.name," Verified Badge"]})]}),e!=null&&e.badge?t("div",{children:[t("div",{className:"flex flex-col items-center  uppercase mb-1",children:[a("div",{children:a("img",{className:"max-h-[120px]",src:"/storage/badges/"+((A=e==null?void 0:e.badge)==null?void 0:A.image)})}),t("div",{className:`font-bold mt-1 ${L((S=e==null?void 0:e.badge)==null?void 0:S.name,"text")}`,children:[(B=e==null?void 0:e.badge)==null?void 0:B.name," Badge"]})]}),v&&t("div",{className:"text-center text-gray-500  text-xs mb-3",children:[a("span",{className:"font-bold",children:v==null?void 0:v.total_score}),"Â ",a("span",{className:" uppercase",children:"Points"})]}),u==null?void 0:u.map(l=>{var p,d;return t("div",{className:"flex justify-center text-gray-500 text-xs mb-1",children:[a("div",{className:"capitalize",children:(d=j.lowerCase((p=l==null?void 0:l.assessment)==null?void 0:p.title))==null?void 0:d.slice(0,11)}),a("div",{className:"mx-1",children:"-"}),a("div",{children:l==null?void 0:l.score})]})})]}):a("div",{className:"bg-slate-600 text-white rounded-full px-3 py-1 font-bold inline-block",children:"No Badge"})]})]})})]})}export{we as default};
