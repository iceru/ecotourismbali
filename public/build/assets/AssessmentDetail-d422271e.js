import{r as b,q as S,W as w,a as t,j as n,d as A}from"./app-564aa5bf.js";import{A as C}from"./AdminSection-6264d2fc.js";import L from"./TitleSection-3bafae38.js";import{B as v}from"./Button-5c6aa829.js";import{l as E}from"./lodash-0cedc2b7.js";import{A as O}from"./AdminLayout-90595167.js";import{n as T}from"./no-image-91387054.js";import{F as B,o as F}from"./index-d6d3d862.js";import{u as D}from"./useTranslation-b7c2539f.js";import"./logo-5e7252b7.js";import"./id-410e5203.js";import"./react-responsive-1f42f9ff.js";function X({assessments:o,session:$,answers:u,member:i}){const[d,x]=b.useState(0),{t:p,i18n:k}=D(),{ziggy:f}=S().props,{data:g,setData:_,processing:j}=w(),l=k.language;b.useEffect(()=>{u.forEach(e=>{e.assessment_question.type==="checkbox"?N(e.assessment_question_id,e.assessment_option_id):y(e.assessment_question_id,e.assessment_option_id)})},[u]);const y=(e,c,a)=>{var s;const r={[`radio.${e}`]:c,assessment_id:o[((s=f==null?void 0:f.query)==null?void 0:s.question)||0].id,session_id:$.id};_(m=>{const h={...m,...r};return a||localStorage.setItem("assessment",JSON.stringify(h)),h})};console.log(o);const N=(e,c,a)=>{_(r=>{const s=r[`checkbox.${e}`]||[],m=s.includes(c)?{...r,[`checkbox.${e}`]:s.filter(h=>h!==c)}:{...r,[`checkbox.${e}`]:[...s,c]};return a||localStorage.setItem("assessment",JSON.stringify(m)),m})};return t(O,{children:n(C,{children:[n(A,{href:route("statistic.index"),className:"flex gap-2 items-center",children:[t(B,{icon:F}),p("back")]}),n("div",{className:"flex items-center justify-center gap-2 mb-4",children:[t("div",{children:i!=null&&i.image?t("img",{className:"w-12 h-12 object-contain",src:`/storage/member/images/${i==null?void 0:i.image}`,alt:""}):t("img",{className:"w-12 h-12",src:T,alt:""})}),t("div",{className:"font-bold text-lg",children:i==null?void 0:i.business_name})]}),t(L,{title:"assessment",className:"mb-6"}),t("div",{className:"assessments",children:o.map((e,c)=>n("div",{className:`${d===c?"":"hidden"}`,children:[t("div",{className:"mb-4 flex justify-center",children:t("img",{src:`/storage/assessments/${l==="en"&&e.image_en?e.image_en:e.image}`,alt:""})}),t("div",{className:"font-bold mb-3 text-xl text-center",children:l==="en"&&e.title_en?e.title_en:e.title}),e.description!=="<p>-</p>"&&t("div",{dangerouslySetInnerHTML:{__html:l==="en"&&e.description_en?e.description_en:e.description},className:"text-center mb-10"}),e.assessment_question.map((a,r)=>n("div",{children:[t("div",{className:"font-bold text-lg mb-3",children:l==="en"&&a.title_en?a.title_en:a.title}),t("div",{dangerouslySetInnerHTML:{__html:l==="en"&&a.question_en?a.question_en:a.question}}),t("div",{className:"mt-4",children:E.sortBy(a.assessment_option,["option_no"]).map(s=>n("div",{className:"flex items-center px-5 py-3 mb-4 rounded-3xl bg-lightPrimary bg-opacity-60",children:[a.type==="radio"?t("input",{type:"radio",name:`radio.${a.id}`,id:`option_${s.id}`,value:s.id,disabled:!0,className:"mr-3 text-primary focus:ring-primary",checked:g[`radio.${a.id}`]===s.id,required:!0,onChange:()=>y(a.id,s.id)}):t("input",{type:"checkbox",name:`checkbox.${a.id}`,id:`option_${s.id}`,value:s.id,disabled:!0,checked:g[`checkbox.${a.id}`]&&g[`checkbox.${a.id}`].includes(s.id),className:"mr-3 text-primary focus:ring-primary",onChange:()=>N(a.id,s.id)}),n("label",{htmlFor:`option_${s.id}`,className:"w-full",children:[l==="en"&&s.option_en?s.option_en:s.option,t("span",{className:"font-bold ml-2",children:`(${s==null?void 0:s.point} Point)`})]})]}))}),r+1!==e.assessment_question.length&&t("div",{className:"h-0.5 w-1/2 my-10 box-border left-1/2 mx-auto -translate-y-1/2 bg-gray-300"})]})),n("div",{className:"flex justify-center gap-6 mt-6",children:[d>0&&t(v,{type:"button",onClick:()=>{x(d-1)},className:"min-w-[160px] flex justify-center",color:"gray",children:p("back")}),d+1<o.length&&t(v,{type:"button",disabled:j,className:"min-w-[160px] flex justify-center",onClick:()=>{x(d+1)},children:p("next")})]})]}))})]})})}export{X as default};
