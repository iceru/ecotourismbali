import{s as J,o as G,r as f,q as A,j as t,a,F as c,y as E}from"./app-3628f376.js";import{F as P,s as C,E as R}from"./index-405c7d95.js";import{q}from"./base-e8aaf39e.js";import{a as B}from"./moment-9b32d41b.js";import{A as d}from"./AdminSection-ce17ebd3.js";import{B as m}from"./Button-8ac79f8a.js";import{M as K}from"./MemberLayout-0a088362.js";import g from"./TitleSection-651f6517.js";import O from"./MemberBadge-92c527dd.js";import W from"./MemberDashboardForm-d8c1479e.js";import U from"./MemberGreenpal-80ae6e16.js";import{g as z}from"./greenpal-f0e012ed.js";import{u as Q}from"./useTranslation-0368a1db.js";import"./id-410e5203.js";import"./no-image-91387054.js";import"./react-responsive-baec7581.js";import"./moment-fbc5633a.js";import"./lodash-12c41008.js";import"./InputLabel-a3ed6719.js";import"./SelectInput-9183e5b1.js";import"./TextInput-8bb55786.js";(function(e,h){(function(r,l){l(typeof J=="function"?B:r.moment)})(G,function(r){//! moment.js locale configuration
var l=r.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(s,i){if(s===12&&(s=0),i==="pagi")return s;if(i==="siang")return s>=11?s:s+12;if(i==="sore"||i==="malam")return s+12},meridiem:function(s,i,n){return s<11?"pagi":s<15?"siang":s<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});return l})})();const D=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});function ge({member:e,scores:h,lastSession:r,business_type:l,expiredDate:s,categories:i}){var k,M,S,N,v,L,w;const{t:n}=Q(),[T,y]=f.useState(!1),[Y,p]=f.useState(!1),j=q.parse(location.search),{flash:x}=A().props,F=sessionStorage.getItem("paid");let _=sessionStorage.getItem("snapToken");const H=()=>{const o=u=>{snap.pay(u,{onSuccess:function(){y(!0),p(!1),sessionStorage.clear("snapToken"),sessionStorage.setItem("paid",!0),E.visit("/member/dashboard?newPayment=true")},onPending:function(){p(!0)},onError:function(){p(!1),sessionStorage.clear("snapToken")},onClose:function(){p(!0)}})};_?o(_):axios.post(route("member_payment.new_payment"),{}).then(function(u){sessionStorage.setItem("snapToken",u.data),o(u.data)})},I=()=>{sessionStorage.clear("snapToken")};return f.useEffect(()=>{j.newPayment&&y(!0)},[]),t(K,{children:[T||F?a("div",{className:"px-4 py-3 bg-primary text-white rounded-md inline-flex mb-4",children:n("pay_complete")}):null,Y&&a("div",{className:"px-4 py-3 bg-yellow-300 rounded-md inline-flex mb-4 transition",children:n("pay_pending")}),x.success&&a("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl relative mb-3",children:a("span",{className:"inline",children:x.success})}),t("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[((k=e==null?void 0:e.program)==null?void 0:k.name)==="Green Pal"&&t(c,{children:[t(d,{children:[a(g,{title:"welcome_greenpal",className:"mb-4"}),t("div",{className:"flex",children:[a("img",{src:z,className:"h-[120px] mr-4",alt:"Green Pal"}),a("p",{className:"text-sm text-justify mb-2",children:n("greenpal_info")})]})]}),t(d,{children:[a(g,{title:"greenpal_community",className:"mb-4"}),a("p",{className:"text-sm text-justify mb-2",children:n("greenpal_text")}),a("p",{className:"text-sm text-justify",children:n("greenpal_text_2")})]})]}),((M=e==null?void 0:e.program)==null?void 0:M.name)!=="Green Pal"&&t(c,{children:[t(d,{children:[a(g,{title:"welcome_member",className:"mb-4"}),a("div",{children:t(m,{as:"link",href:route("member.profile"),className:"mb-4 !inline-block",color:"lightPrimary",children:[n("edit_profile"),a(P,{className:"ml-2",icon:C})]})}),((S=e==null?void 0:e.status)==null?void 0:S.includes("active"))&&((N=e==null?void 0:e.program)==null?void 0:N.name)!=="Green Pal"&&a("div",{children:t(m,{className:"!inline-block",as:"link",href:route("member.module.index"),color:"lightSecondary",children:[n("start_learning"),a(P,{icon:R,className:"ml-2"})]})})]}),a(d,{children:a(O,{member:e,lastSession:r,scores:h,expiredDate:s})})]})]}),!((v=e==null?void 0:e.status)!=null&&v.includes("active"))&&t(d,{className:"flex flex-col items-center justify-center gap-4",children:[((L=e==null?void 0:e.program)==null?void 0:L.name)!=="Green Pal"&&a("h2",{className:"font-bold text-xl",children:n("member_not_active")}),(e==null?void 0:e.status)==="payment"&&(e!=null&&e.total_payment)?t(c,{children:[a("p",{className:"text-sm",children:n("member_locked_text")}),t("div",{className:"flex flex-wrap justify-between w-full lg:w-2/3 items-center bg-lightSecondary bg-opacity-60 rounded-2xl p-6 mt-4",children:[t("div",{className:" mb-4 lg:mb-0",children:[a("p",{children:n("total_payment")}),a("h4",{className:"text-2xl font-bold mb-2",children:t("span",{children:[a("strike",{children:D.format(12e6)}),a("span",{className:"ml-2 text-red-600 text-3xl",children:D.format(e==null?void 0:e.total_payment)})]})}),t("p",{children:["Secure our launch price ",a("strong",{children:"Exp 31 Oct 2024"})]})]}),t("div",{className:"flex items-center",children:[_&&a(m,{className:"text-[16px] mr-4",color:"danger",onClick:I,children:n("reset_pay")}),a(m,{className:"text-[16px] ",onClick:()=>{var o;return(o=e==null?void 0:e.status)!=null&&o.includes("active")?null:H()},children:n("member_locked_button")})]})]})]}):(e==null?void 0:e.status)==="waiting_approval"?a(c,{children:a("p",{children:n("member_not_approved")})}):a(c,{children:((w=e==null?void 0:e.program)==null?void 0:w.name)!=="Green Pal"?a(W,{business_type:l,member:e}):a(U,{member:e,categories:i})})]})]})}export{ge as default};
