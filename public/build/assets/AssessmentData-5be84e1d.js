import{r as d,q as I,W as L,b as e,j as t}from"./app-cdc8cd06.js";import{A as y}from"./id-531b42c3.js";import{I as r}from"./InputLabel-a1b7b244.js";import{M as P}from"./MemberLayout-3776edd1.js";import{T as m}from"./TextInput-32e4389f.js";import{P as A}from"./PrimaryButton-6ccd38ab.js";import{h as T}from"./moment-fbc5633a.js";import{S as h}from"./SelectInput-fc227df9.js";import{u as M}from"./useTranslation-1518e01b.js";import"./index-dee09260.js";import"./react-responsive-ca12a935.js";function Q(){var _,f;const{t:l}=M(),[x,N]=d.useState(),[p,w]=d.useState(),[F,j]=d.useState(),[v,C]=d.useState(!1),{member:n,remaining:b,dateAssessment:S}=I().props,{data:i,setData:c,post:k,errors:s}=L({business_name:n.business_name||"",company_name:n.company_name||"",sister_company:n.sister_company||"",city:n.city||"",province:n.province||"",address:n.address||"",website:n.website||"",name:((_=n==null?void 0:n.user)==null?void 0:_.name)||"",job_title:n.job_title||"",phone:n.phone||"",email:((f=n==null?void 0:n.user)==null?void 0:f.email)||"",business_type_id:n.business_type_id||""}),D=a=>{a.preventDefault(),k(route("member.assessment.store",n.id),{})};d.useEffect(()=>{fetch("https://iceru.github.io/api-wilayah-indonesia/api/provinces.json").then(a=>a.json()).then(a=>{N(a);let o;i!=null&&i.province&&(o=a.find(u=>u.name===(i==null?void 0:i.province))),g(p||o.id||a[0].id)})},[]),d.useEffect(()=>{p&&g(p)},[p]);const g=a=>{fetch(`https://iceru.github.io/api-wilayah-indonesia/api/regencies/${a||p}.json`).then(o=>o.json()).then(o=>j(o))},E=[{label:"No",value:!1},{label:"Yes",value:!0}];return e(P,{children:b>0?t(y,{className:"grid gap-8",children:[e("h3",{className:"uppercase text-lg font-bold text-center",children:l("business_info")}),t("form",{onSubmit:D,children:[t("div",{className:"grid lg:grid-cols-2 gap-6",children:[t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"business_name",value:l("label_business_name")}),e(m,{id:"business_name",name:"business_name",value:i.business_name,className:"block w-full",isFocused:!0,onChange:a=>c("business_name",a.target.value)}),s.business_name&&e("span",{className:"text-red-600",children:s.business_name})]}),t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"company_name",value:l("label_company_name")}),e(m,{id:"company_name",name:"company_name",value:i.company_name,className:"block w-full",isFocused:!0,onChange:a=>c("company_name",a.target.value)}),s.company_name&&e("span",{className:"text-red-600",children:s.company_name})]}),t("div",{className:"flex flex-col gap-3",children:[e(r,{htmlFor:"isSisterCompany",value:l("label_is_sister_company")}),e(h,{options:E,onChange:()=>{C(!v)}})]}),v&&t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"sister_company",value:l("label_sister_company")}),e(m,{id:"sister_company",name:"sister_company",value:i.sister_company,className:"block w-full",isFocused:!0,onChange:a=>c("sister_company",a.target.value)}),s.sister_company&&e("span",{className:"text-red-600",children:s.sister_company})]}),t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"website",value:l("label_website")}),e(m,{id:"website",name:"website",value:i.website,className:"block w-full",isFocused:!0,rows:8,onChange:a=>c("website",a.target.value)}),s.website&&e("span",{className:"text-red-600",children:s.website})]}),t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"name",value:l("label_name")}),e(m,{id:"name",name:"name",value:i.name,className:"block w-full",isFocused:!0,rows:8,onChange:a=>c("name",a.target.value)}),s.name&&e("span",{className:"text-red-600",children:s.name})]}),t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"job_title",value:l("label_job_title")}),e(m,{id:"job_title",name:"job_title",value:i.job_title,className:"block w-full",isFocused:!0,rows:8,onChange:a=>c("job_title",a.target.value)}),s.job_title&&e("span",{className:"text-red-600",children:s.job_title})]}),t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"email",value:l("label_email")}),e(m,{id:"email",name:"email",value:i.email,className:"block w-full",isFocused:!0,rows:8,onChange:a=>c("email",a.target.value)}),s.email&&e("span",{className:"text-red-600",children:s.email})]}),t("div",{className:"grid gap-3",children:[e(r,{htmlFor:"phone",value:l("label_phone")}),e(m,{id:"phone",name:"phone",value:i.phone,className:"block w-full",isFocused:!0,type:"tel",onChange:a=>c("phone",a.target.value)}),s.phone&&e("span",{className:"text-red-600",children:s.phone})]})]}),t("div",{className:"mt-6 pt-6 border-t",children:[e("div",{className:"text-lg font-bold mb-3 text-center",children:l("address")}),t("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[t("div",{className:"flex flex-col gap-3",children:[e(r,{htmlFor:"provinces",value:l("provinces")}),e(h,{options:x,labelData:"name",valueData:"id",placeholder:"select_province",selectedLabel:i.province,onChange:a=>{const o=a.nativeEvent.target.selectedIndex,u=a.nativeEvent.target[o].text;w(a.target.value),c("province",u)}}),s.provinces&&e("span",{className:"text-red-600",children:s.provinces})]}),t("div",{className:"flex flex-col gap-3",children:[e(r,{htmlFor:"city",value:l("city")}),e(h,{options:F,labelData:"name",valueData:"id",placeholder:"select_city",selectedLabel:i.city,onChange:a=>{const o=a.nativeEvent.target.selectedIndex,u=a.nativeEvent.target[o].text;c("city",u)}}),s.city&&e("span",{className:"text-red-600",children:s.city})]})]}),t("div",{className:"flex flex-col gap-3",children:[e(r,{htmlFor:"address",value:l("address")}),e(m,{id:"address",name:"address",value:i.address,className:"block w-full",isFocused:!0,onChange:a=>c("address",a.target.value)}),s.address&&e("span",{className:"text-red-600",children:s.address})]})]}),e(A,{className:"py-3 mt-6 w-full",children:e("div",{className:"w-full",children:l("next")})})]})]}):t(y,{className:"grid gap-6",children:[e("div",{className:"px-4 py-3 bg-red-300 rounded-md inline-flex",children:l("not_eligible_assessment",{number:b})}),e("div",{className:"text-center text-lg",children:l("cant_assessment")}),e("div",{className:"text-center text-2xl text-primary",children:T(S).format("LL")})]})})}export{Q as default};
