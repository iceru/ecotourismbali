import{s as B,c as K,r as _,q as V,j as f,b as c,F as u,t as W}from"./app-cdc8cd06.js";import{F as A,m as z,r as Q}from"./index-dee09260.js";import{a as X}from"./moment-83c0fe62.js";import{A as p}from"./id-531b42c3.js";import{P as F}from"./PrimaryButton-6ccd38ab.js";import{M as Z}from"./MemberLayout-3776edd1.js";import x from"./TitleSection-db94a0ce.js";import v from"./MemberBadge-aa8e976a.js";import ee from"./MemberDashboardForm-54a20555.js";import re from"./MemberGreenpal-9a853963.js";import{g as te}from"./greenpal-f0e012ed.js";import{u as ne}from"./useTranslation-1518e01b.js";import"./react-responsive-ca12a935.js";import"./moment-fbc5633a.js";import"./lodash-d12ac468.js";import"./BadgeColor-9c6bdf3f.js";import"./InputLabel-a1b7b244.js";import"./SelectInput-fc227df9.js";import"./TextInput-32e4389f.js";const I="%[a-f0-9]{2}",L=new RegExp("("+I+")|([^%]+?)","gi"),D=new RegExp("("+I+")+","gi");function b(e,r){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;r=r||1;const t=e.slice(0,r),n=e.slice(r);return Array.prototype.concat.call([],b(t),b(n))}function ae(e){try{return decodeURIComponent(e)}catch{let r=e.match(L)||[];for(let t=1;t<r.length;t++)e=b(r,t).join(""),r=e.match(L)||[];return e}}function ie(e){const r={"%FE%FF":"��","%FF%FE":"��"};let t=D.exec(e);for(;t;){try{r[t[0]]=decodeURIComponent(t[0])}catch{const a=ae(t[0]);a!==t[0]&&(r[t[0]]=a)}t=D.exec(e)}r["%C2"]="�";const n=Object.keys(r);for(const a of n)e=e.replace(new RegExp(a,"g"),r[a]);return e}function se(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return ie(e)}}function P(e,r){if(!(typeof e=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||r==="")return[];const t=e.indexOf(r);return t===-1?[]:[e.slice(0,t),e.slice(t+r.length)]}function ce(e,r){const t={};if(Array.isArray(r))for(const n of r){const a=Object.getOwnPropertyDescriptor(e,n);a!=null&&a.enumerable&&Object.defineProperty(t,n,a)}else for(const n of Reflect.ownKeys(e)){const a=Object.getOwnPropertyDescriptor(e,n);if(a.enumerable){const i=e[n];r(n,i,e)&&Object.defineProperty(t,n,a)}}return t}const le=e=>e==null,oe=e=>encodeURIComponent(e).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`),S=Symbol("encodeFragmentIdentifier");function fe(e){switch(e.arrayFormat){case"index":return r=>(t,n)=>{const a=t.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[o(r,e),"[",a,"]"].join("")]:[...t,[o(r,e),"[",o(a,e),"]=",o(n,e)].join("")]};case"bracket":return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[o(r,e),"[]"].join("")]:[...t,[o(r,e),"[]=",o(n,e)].join("")];case"colon-list-separator":return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[o(r,e),":list="].join("")]:[...t,[o(r,e),":list=",o(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const r=e.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:(a=a===null?"":a,n.length===0?[[o(t,e),r,o(a,e)].join("")]:[[n,o(a,e)].join(e.arrayFormatSeparator)])}default:return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,o(r,e)]:[...t,[o(r,e),"=",o(n,e)].join("")]}}function de(e){let r;switch(e.arrayFormat){case"index":return(t,n,a)=>{if(r=/\[(\d*)]$/.exec(t),t=t.replace(/\[\d*]$/,""),!r){a[t]=n;return}a[t]===void 0&&(a[t]={}),a[t][r[1]]=n};case"bracket":return(t,n,a)=>{if(r=/(\[])$/.exec(t),t=t.replace(/\[]$/,""),!r){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[...a[t],n]};case"colon-list-separator":return(t,n,a)=>{if(r=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!r){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[...a[t],n]};case"comma":case"separator":return(t,n,a)=>{const i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),s=typeof n=="string"&&!i&&d(n,e).includes(e.arrayFormatSeparator);n=s?d(n,e):n;const l=i||s?n.split(e.arrayFormatSeparator).map(h=>d(h,e)):n===null?n:d(n,e);a[t]=l};case"bracket-separator":return(t,n,a)=>{const i=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!i){a[t]=n&&d(n,e);return}const s=n===null?[]:n.split(e.arrayFormatSeparator).map(l=>d(l,e));if(a[t]===void 0){a[t]=s;return}a[t]=[...a[t],...s]};default:return(t,n,a)=>{if(a[t]===void 0){a[t]=n;return}a[t]=[...[a[t]].flat(),n]}}}function C(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,r){return r.encode?r.strict?oe(e):encodeURIComponent(e):e}function d(e,r){return r.decode?se(e):e}function T(e){return Array.isArray(e)?e.sort():typeof e=="object"?T(Object.keys(e)).sort((r,t)=>Number(r)-Number(t)).map(r=>e[r]):e}function Y(e){const r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function me(e){let r="";const t=e.indexOf("#");return t!==-1&&(r=e.slice(t)),r}function E(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function N(e){e=Y(e);const r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function w(e,r){r={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...r},C(r.arrayFormatSeparator);const t=de(r),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(const a of e.split("&")){if(a==="")continue;const i=r.decode?a.replace(/\+/g," "):a;let[s,l]=P(i,"=");s===void 0&&(s=i),l=l===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?l:d(l,r),t(d(s,r),l,n)}for(const[a,i]of Object.entries(n))if(typeof i=="object"&&i!==null)for(const[s,l]of Object.entries(i))i[s]=E(l,r);else n[a]=E(i,r);return r.sort===!1?n:(r.sort===!0?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce((a,i)=>{const s=n[i];return s&&typeof s=="object"&&!Array.isArray(s)?a[i]=T(s):a[i]=s,a},Object.create(null))}function R(e,r){if(!e)return"";r={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...r},C(r.arrayFormatSeparator);const t=s=>r.skipNull&&le(e[s])||r.skipEmptyString&&e[s]==="",n=fe(r),a={};for(const[s,l]of Object.entries(e))t(s)||(a[s]=l);const i=Object.keys(a);return r.sort!==!1&&i.sort(r.sort),i.map(s=>{const l=e[s];return l===void 0?"":l===null?o(s,r):Array.isArray(l)?l.length===0&&r.arrayFormat==="bracket-separator"?o(s,r)+"[]":l.reduce(n(s),[]).join("&"):o(s,r)+"="+o(l,r)}).filter(s=>s.length>0).join("&")}function $(e,r){var a;r={decode:!0,...r};let[t,n]=P(e,"#");return t===void 0&&(t=e),{url:((a=t==null?void 0:t.split("?"))==null?void 0:a[0])??"",query:w(N(e),r),...r&&r.parseFragmentIdentifier&&n?{fragmentIdentifier:d(n,r)}:{}}}function U(e,r){r={encode:!0,strict:!0,[S]:!0,...r};const t=Y(e.url).split("?")[0]||"",n=N(e.url),a={...w(n,{sort:!1}),...e.query};let i=R(a,r);i&&(i=`?${i}`);let s=me(e.url);if(e.fragmentIdentifier){const l=new URL(t);l.hash=e.fragmentIdentifier,s=r[S]?l.hash:`#${e.fragmentIdentifier}`}return`${t}${i}${s}`}function H(e,r,t){t={parseFragmentIdentifier:!0,[S]:!1,...t};const{url:n,query:a,fragmentIdentifier:i}=$(e,t);return U({url:n,query:ce(a,r),fragmentIdentifier:i},t)}function ue(e,r,t){const n=Array.isArray(r)?a=>!r.includes(a):(a,i)=>!r(a,i);return H(e,n,t)}const pe=Object.freeze(Object.defineProperty({__proto__:null,exclude:ue,extract:N,parse:w,parseUrl:$,pick:H,stringify:R,stringifyUrl:U},Symbol.toStringTag,{value:"Module"}));(function(e,r){(function(t,n){n(typeof B=="function"?X:t.moment)})(K,function(t){//! moment.js locale configuration
var n=t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(a,i){if(a===12&&(a=0),i==="pagi")return a;if(i==="siang")return a>=11?a:a+12;if(i==="sore"||i==="malam")return a+12},meridiem:function(a,i,s){return a<11?"pagi":a<15?"siang":a<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});return n})})();const ge=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});function Ce({member:e,scores:r,lastSession:t,business_type:n,expiredDate:a}){var j,O;const{t:i}=ne(),[s,l]=_.useState(!1),[h,g]=_.useState(!1),J=pe.parse(location.search),{flash:M}=V().props,G=sessionStorage.getItem("paid"),q=()=>{let m=sessionStorage.getItem("snapToken");const k=y=>{snap.pay(y,{onSuccess:function(){l(!0),g(!1),sessionStorage.clear("snapToken"),sessionStorage.setItem("paid",!0),W.visit("/member/dashboard?newPayment=true")},onPending:function(){g(!0)},onError:function(){g(!1),sessionStorage.clear("snapToken")},onClose:function(){g(!0)}})};m?k(m):axios.post(route("member_payment.new_payment"),{}).then(function(y){sessionStorage.setItem("snapToken",y.data),k(y.data)})};return _.useEffect(()=>{J.newPayment&&l(!0)},[]),f(Z,{children:[s||G?c("div",{className:"px-4 py-3 bg-primary text-white rounded-md inline-flex mb-4",children:i("pay_complete")}):null,h&&c("div",{className:"px-4 py-3 bg-yellow-300 rounded-md inline-flex mb-4 transition",children:i("pay_pending")}),M.success&&c("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl relative mb-3",children:c("span",{className:"inline",children:M.success})}),f("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[e.program.name==="Green Pal"&&f(u,{children:[f(p,{children:[c(x,{title:"welcome_greenpal",className:"mb-4"}),f("div",{className:"flex",children:[c("img",{src:te,className:"h-[120px] mr-4",alt:"Green Pal"}),c("p",{className:"text-sm text-justify mb-2",children:i("greenpal_info")})]})]}),f(p,{children:[c(x,{title:"greenpal_community",className:"mb-4"}),c("p",{className:"text-sm text-justify mb-2",children:i("greenpal_text")}),c("p",{className:"text-sm text-justify",children:i("greenpal_text_2")})]})]}),e.program.name!=="Green Pal"&&f(u,{children:[f(p,{children:[c(x,{title:"welcome_member",className:"mb-4"}),c("div",{children:f(F,{as:"link",href:route("member.profile"),className:"mb-4 !inline-block",color:"lightPrimary",children:[i("edit_profile"),c(A,{className:"ml-2",icon:z})]})}),((j=e==null?void 0:e.status)==null?void 0:j.includes("active"))&&e.program.name!=="Green Pal"&&c("div",{children:f(F,{className:"!inline-block",as:"link",href:route("member.module.index"),color:"lightSecondary",children:[i("start_learning"),c(A,{icon:Q,className:"ml-2"})]})})]}),c(p,{children:c(v,{member:e,lastSession:t,scores:r,expiredDate:a})})]})]}),!((O=e==null?void 0:e.status)!=null&&O.includes("active"))&&f(p,{className:"flex flex-col items-center justify-center gap-4",children:[e.program.name!=="Green Pal"&&c("h2",{className:"font-bold text-xl",children:i("member_not_active")}),e.status==="payment"&&e.total_payment?f(u,{children:[c("p",{className:"text-sm",children:i("member_locked_text")}),f("div",{className:"flex justify-between w-full lg:w-2/3 items-center bg-lightSecondary bg-opacity-60 rounded-2xl p-6 mt-4",children:[f("div",{children:[c("p",{children:i("total_payment")}),c("h4",{className:"text-2xl font-bold",children:ge.format(e.total_payment)})]}),c(F,{className:"text-[16px]",onClick:()=>{var m;return(m=e==null?void 0:e.status)!=null&&m.includes("active")?null:q()},children:i("member_locked_button")})]})]}):e.status==="waiting_approval"?c(u,{children:c("p",{children:i("member_not_approved")})}):c(u,{children:e.program.name!=="Green Pal"?c(ee,{business_type:n,member:e}):c(re,{member:e})})]})]})}export{Ce as default};
