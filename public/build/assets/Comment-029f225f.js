import{W as _,j as e,a as l,F as c}from"./app-8b4ddf9d.js";import{h as y}from"./moment-fbc5633a.js";import{T as A}from"./TextInput-44832702.js";import{B as o}from"./Button-2757fec7.js";import{b as $}from"./BadgeColor-11ea7af3.js";import{l as k}from"./lodash-0dbf1cb4.js";import{F as D,z as E}from"./index-cb3b46e0.js";import{F as S}from"./FileSaver.min-811f13f3.js";import{u as T}from"./useTranslation-7870b40e.js";function O({comment:a,type:r,member:d,thread:f,images:h}){var u,v,N,w,b,n;const s=r==="input"?d:a==null?void 0:a.member,{t:p}=T(),{data:F,setData:x,post:g,errors:B}=_({thread_id:f==null?void 0:f.id,text:""}),j=i=>{i.preventDefault(),g(route("member.forum.comment.store"),{onSuccess:()=>{x("text","")}})},C=(i,t)=>{S.saveAs(`/storage/threads/files/${t}`,t)},L=(i,t)=>{i.preventDefault(),confirm("Are you sure to delete the comment?")&&g(route("member.forum.comment.destroy",t))};return e("div",{className:`p-6 rounded-xl flex gap-6 bg-opacity-30 shadow-lg flex-wrap lg:flex-nowrap ${r==="thread"?"bg-lightPrimary w-full":"bg-white lg:w-[90%] ml-auto"}`,children:[e("div",{className:"flex",children:[l("div",{className:"w-[48px] mr-3 mt-0.5",children:l("img",{src:`/storage/member/images/${s==null?void 0:s.image}`,alt:""})}),e("div",{children:[l("h4",{className:"text-lg font-bold",children:s==null?void 0:s.business_name}),l("div",{className:"flex gap-2 items-center",children:(s==null?void 0:s.badge_id)&&e(c,{children:[l("div",{className:"h-[32px] w-[24px]",children:l("img",{className:"h-full object-contain w-full",src:"/storage/badges/"+((u=s==null?void 0:s.badge)==null?void 0:u.image)})}),e("div",{className:`text-center whitespace-nowrap text-sm ${$((v=s==null?void 0:s.badge)==null?void 0:v.name,"text")}`,children:[(N=s==null?void 0:s.badge)==null?void 0:N.name," Member"]})]})})]})]}),l("div",{className:"w-full ",children:r==="input"?e("form",{onSubmit:j,children:[l("div",{className:"font-bold text-sm text-primary mb-2",children:y().format("LLL")}),l(A,{typeForm:"textarea",className:"border mb-4 w-full",row:5,placeholder:"Add Comment",value:F.text,onChange:i=>x("text",i.target.value)}),l(o,{children:p("submit")})]}):e(c,{children:[e("div",{className:"flex justify-between items-center",children:[l("div",{className:"font-bold text-sm text-primary mb-2",children:y(a==null?void 0:a.created_at).format("LLL")}),r!=="thread"&&(d==null?void 0:d.id)===((w=a==null?void 0:a.member)==null?void 0:w.id)&&l(o,{color:"danger",className:"!text-xs",onClick:i=>{L(i,a==null?void 0:a.id)},children:p("delete")})]}),!k.isEmpty(h)&&l("div",{className:"flex justify-center gap-6 mb-5",children:h.map(i=>l("img",{className:"max-h-[200px] object-contain",src:"/storage/threads/images/"+i,alt:""}))}),l("div",{className:"mb-4",children:a==null?void 0:a.text}),(a==null?void 0:a.file)&&e(o,{color:"primary",onClick:i=>C(i,a==null?void 0:a.file),title:a==null?void 0:a.file,children:[l(D,{icon:E,className:"mr-2"})," ",((b=a==null?void 0:a.file)==null?void 0:b.length)>30?((n=a==null?void 0:a.file)==null?void 0:n.slice(0,30))+"....":a==null?void 0:a.file]})]})})]})}export{O as default};
