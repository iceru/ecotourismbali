import{r as m,W as D,a as e,j as n,y as F}from"./app-2f14b1d8.js";import{B as S}from"./Button-d0547ed4.js";import{T as u}from"./TextInput-e8e68f38.js";import{G as w}from"./GuestLayout-488b4d51.js";import{d as I}from"./donation-0fbbedea.js";import{u as C}from"./useTranslation-26b2fcf0.js";import"./moment-fbc5633a.js";import"./logo-5e7252b7.js";import"./index-5f6f5624.js";import"./index-25fc1de7.js";import"./id-410e5203.js";function z(){const{t:f}=C(),i=[1e5,25e4,5e5],[p,g]=m.useState(i[0]),[y,r]=m.useState(!1),[v,N]=m.useState(),{data:t,setData:c,post:x,processing:k,errors:o,reset:T}=D({name:"",email:"",company:"",amount:p});let h=sessionStorage.getItem("snapTokenDonation");const b=a=>{a.preventDefault();const l=s=>{snap.pay(s,{onSuccess:function(){r(!1),sessionStorage.clear("snapTokenDonation"),sessionStorage.setItem("paid",!0),F.visit("/donation/success")},onPending:function(){r(!0)},onError:function(){r(!1),sessionStorage.clear("snapTokenDonation")},onClose:function(){r(!0),sessionStorage.clear("snapTokenDonation")}})};h?l(h):x(route("donation.store"),{onSuccess:()=>{axios.post(route("donation.pay"),{email:t==null?void 0:t.email,amount:t==null?void 0:t.amount}).then(function(s){sessionStorage.setItem("snapTokenDonation",s.data),l(s.data)}).catch(s=>{console.log(s)})}})},d=a=>{let l=a;typeof a=="string"&&(l=a.replace(/[^0-9]/g,""));const s=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l);g(parseInt(l)),N(s),c("amount",parseInt(l))};return m.useEffect(()=>{d(i[0])},[]),console.log(o),e(w,{children:n("main",{children:[n("div",{className:"container grid lg:grid-cols-2 gap-10",children:[n("section",{children:[n("h1",{className:"text-4xl font-bold font-sans leading-snug mb-4",children:["Donations for ",e("br",{})," Regenerative Bali"]}),n("p",{children:["Lorem ipsum dolor sit amet consectetur. Ut pharetra lorem nunc mi sed. Vitae egestas vitae leo augue. Nec nibh fames vitae libero et congue et pellentesque turpis. ",e("br",{})," ",e("br",{})," Fermentum sagittis sem consectetur integer volutpat scelerisque. Id lobortis maecenas aliquet praesent. Faucibus nam amet nullam volutpat orci. Amet arcu mauris eget phasellus sit."]})]}),n("form",{onSubmit:b,className:"p-6 rounded-3xl shadow-md bg-white relative z-10 mb-4 lg:mb-0",children:[n("div",{className:"mb-4",children:[e("label",{htmlFor:"name",className:"mb-3 block",children:"Your Name"}),e(u,{id:"name",name:"name",required:!0,value:t.name,className:"block w-full",isFocused:!0,onChange:a=>c("name",a.target.value)}),(o==null?void 0:o.name)&&e("span",{className:"text-red-600",children:o.name})]}),n("div",{className:"mb-4",children:[e("label",{htmlFor:"email",className:"mb-3 block",children:"Your Email"}),e(u,{id:"email",name:"email",required:!0,value:t.email,className:"block w-full",isFocused:!0,onChange:a=>c("email",a.target.value)}),(o==null?void 0:o.email)&&e("span",{className:"text-red-600",children:o.email})]}),n("div",{className:"mb-4",children:[e("label",{htmlFor:"company",className:"mb-3 block",children:"Company (optional)"}),e(u,{id:"company",name:"company",value:t.company,className:"block w-full",isFocused:!0,onChange:a=>c("company",a.target.value)})]}),n("div",{children:[e("label",{htmlFor:"amount",className:"mb-3 block",children:"Select Amount"}),e("div",{className:"flex flex-wrap lg:flex-nowrap gap-4 mb-4",children:i==null?void 0:i.map(a=>e("button",{className:`w-full px-4 py-2 rounded-lg border-secondary border font-bold text-secondary 
                    text-center hover:bg-secondary hover:bg-opacity-70 hover:text-white transition ${p===a?"bg-secondary text-white":""}`,onClick:()=>{g(a),d(a)},children:a==null?void 0:a.toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0})}))})]}),n("div",{className:"mb-4",children:[e("label",{htmlFor:"company",className:"mb-3 block",children:"or Enter Amount"}),e(u,{id:"amount",name:"amount",value:v,className:"block w-full",isFocused:!0,onChange:a=>{d(a.target.value)}})]}),n("div",{children:[e(S,{color:"secondary",className:"!font-bold w-full text-center justify-center",onClick:b,disabled:k,children:f("submit")}),y&&e("div",{className:"mt-2 text-red-600 text-center",children:"You currently have a pending payment. Click submit again"})]})]})]}),e("div",{children:e("img",{src:I,alt:"Donation",className:"lg:-mt-40 rounded w-full hidden lg:block"})})]})})}export{z as default};
