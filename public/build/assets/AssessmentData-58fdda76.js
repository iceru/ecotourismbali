import{r as d,q as I,W as L,b as e,j as t}from"./app-e29e0c80.js";import{A as y}from"./id-6208e1ea.js";import{I as i}from"./InputLabel-fb02078f.js";import{M as P}from"./MemberLayout-a79b0fa7.js";import{T as o}from"./TextInput-81cb70c0.js";import{P as A}from"./PrimaryButton-bb49107b.js";import{h as T}from"./moment-fbc5633a.js";import{S as h}from"./SelectInput-483ac0c9.js";import{u as M}from"./useTranslation-088723e2.js";import"./index-70686e9e.js";import"./react-responsive-82aeb7f9.js";function Q(){var _,x;const{t:l}=M(),[f,N]=d.useState(),[p,w]=d.useState(),[F,j]=d.useState(),[v,C]=d.useState(!1),{member:n,remaining:b,dateAssessment:S}=I().props,{data:c,setData:r,post:k,errors:s}=L({business_name:n.business_name||"",company_name:n.company_name||"",sister_company:n.sister_company||"",city:n.city||"",province:n.province||"",address:n.address||"",website:n.website||"",name:((_=n==null?void 0:n.user)==null?void 0:_.name)||"",job_title:n.job_title||"",phone:n.phone||"",email:((x=n==null?void 0:n.user)==null?void 0:x.email)||"",business_type_id:n.business_type_id||""}),D=a=>{a.preventDefault(),k(route("member.assessment.store",n.id),{})};d.useEffect(()=>{fetch("https://iceru.github.io/api-wilayah-indonesia/api/provinces.json").then(a=>a.json()).then(a=>{N(a),g(p||a[0].id)})},[]),d.useEffect(()=>{g()},[p]);const g=a=>{fetch(`https://iceru.github.io/api-wilayah-indonesia/api/regencies/${a||p}.json`).then(m=>m.json()).then(m=>j(m))},E=[{label:"No",value:!1},{label:"Yes",value:!0}];return e(P,{children:b>0?t(y,{className:"grid gap-8",children:[e("h3",{className:"uppercase text-lg font-bold text-center",children:l("business_info")}),t("form",{onSubmit:D,children:[t("div",{className:"grid lg:grid-cols-2 gap-6",children:[t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"business_name",value:l("label_business_name")}),e(o,{id:"business_name",name:"business_name",value:c.business_name,className:"block w-full",isFocused:!0,onChange:a=>r("business_name",a.target.value)}),s.business_name&&e("span",{className:"text-red-600",children:s.business_name})]}),t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"company_name",value:l("label_company_name")}),e(o,{id:"company_name",name:"company_name",value:c.company_name,className:"block w-full",isFocused:!0,onChange:a=>r("company_name",a.target.value)}),s.company_name&&e("span",{className:"text-red-600",children:s.company_name})]}),t("div",{className:"flex flex-col gap-3",children:[e(i,{htmlFor:"isSisterCompany",value:l("label_is_sister_company")}),e(h,{options:E,onChange:()=>{C(!v)}})]}),v&&t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"sister_company",value:l("label_sister_company")}),e(o,{id:"sister_company",name:"sister_company",value:c.sister_company,className:"block w-full",isFocused:!0,onChange:a=>r("sister_company",a.target.value)}),s.sister_company&&e("span",{className:"text-red-600",children:s.sister_company})]}),t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"website",value:l("label_website")}),e(o,{id:"website",name:"website",value:c.website,className:"block w-full",isFocused:!0,rows:8,onChange:a=>r("website",a.target.value)}),s.website&&e("span",{className:"text-red-600",children:s.website})]}),t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"name",value:l("label_name")}),e(o,{id:"name",name:"name",value:c.name,className:"block w-full",isFocused:!0,rows:8,onChange:a=>r("name",a.target.value)}),s.name&&e("span",{className:"text-red-600",children:s.name})]}),t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"job_title",value:l("label_job_title")}),e(o,{id:"job_title",name:"job_title",value:c.job_title,className:"block w-full",isFocused:!0,rows:8,onChange:a=>r("job_title",a.target.value)}),s.job_title&&e("span",{className:"text-red-600",children:s.job_title})]}),t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"email",value:l("label_email")}),e(o,{id:"email",name:"email",value:c.email,className:"block w-full",isFocused:!0,rows:8,onChange:a=>r("email",a.target.value)}),s.email&&e("span",{className:"text-red-600",children:s.email})]}),t("div",{className:"grid gap-3",children:[e(i,{htmlFor:"phone",value:l("label_phone")}),e(o,{id:"phone",name:"phone",value:c.phone,className:"block w-full",isFocused:!0,type:"tel",onChange:a=>r("phone",a.target.value)}),s.phone&&e("span",{className:"text-red-600",children:s.phone})]})]}),t("div",{className:"mt-6 pt-6 border-t",children:[e("div",{className:"text-lg font-bold mb-3 text-center",children:l("address")}),t("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[t("div",{className:"flex flex-col gap-3",children:[e(i,{htmlFor:"provinces",value:l("provinces")}),e(h,{options:f,labelData:"name",valueData:"id",placeholder:"select_province",selectedLabel:c.province,onChange:a=>{const m=a.nativeEvent.target.selectedIndex,u=a.nativeEvent.target[m].text;w(a.target.value),r("province",u)}}),s.provinces&&e("span",{className:"text-red-600",children:s.provinces})]}),t("div",{className:"flex flex-col gap-3",children:[e(i,{htmlFor:"city",value:l("city")}),e(h,{options:F,labelData:"name",valueData:"id",placeholder:"select_city",onChange:a=>{const m=a.nativeEvent.target.selectedIndex,u=a.nativeEvent.target[m].text;r("city",u)}}),s.city&&e("span",{className:"text-red-600",children:s.city})]})]}),t("div",{className:"flex flex-col gap-3",children:[e(i,{htmlFor:"address",value:l("address")}),e(o,{id:"address",name:"address",typeForm:"textarea",value:c.address,className:"block w-full",isFocused:!0,onChange:a=>r("address",a.target.value)}),s.address&&e("span",{className:"text-red-600",children:s.address})]})]}),e(A,{className:"py-3 mt-6 w-full",children:e("div",{className:"w-full",children:l("next")})})]})]}):t(y,{className:"grid gap-6",children:[e("div",{className:"px-4 py-3 bg-red-300 rounded-md inline-flex",children:l("not_eligible_assessment",{number:b})}),e("div",{className:"text-center text-lg",children:l("cant_assessment")}),e("div",{className:"text-center text-2xl text-primary",children:T(S).format("LL")})]})})}export{Q as default};
