import{r as c,W as E,j as s,F as k,a as t}from"./app-3628f376.js";import{I as r}from"./InputLabel-a3ed6719.js";import{S as _}from"./SelectInput-9183e5b1.js";import{T as v}from"./TextInput-8bb55786.js";import{B as I}from"./Button-8ac79f8a.js";import{u as H}from"./useTranslation-0368a1db.js";const R=({business_type:h,member:n})=>{var f;const{t:o}=H(),[m,b]=c.useState(),[g,x]=c.useState(),[N,F]=c.useState(),[u,w]=c.useState(((f=n==null?void 0:n.business_type)==null?void 0:f.name)||"Hotel"),{data:d,setData:i,post:D,processing:S,errors:a,reset:j}=E({no_rooms:n.no_rooms||null,no_employees:n.no_employees||null,no_outlets:n.no_outlets||null,business_type_id:n.business_type_id||h[0].id||null,total_payment:u==="Hotel"?98e5:7e6,city:n.city||"",province:n.province||""});c.useEffect(()=>{fetch("https://iceru.github.io/api-wilayah-indonesia/api/provinces.json").then(e=>e.json()).then(e=>{F(e),y(m||e[0].id)})},[]),c.useEffect(()=>{y()},[m]),c.useEffect(()=>{u==="Restaurant"&&(i(e=>({...e,no_outlets:null})),i(e=>({...e,no_rooms:null})))},[u]);const y=e=>{fetch(`https://iceru.github.io/api-wilayah-indonesia/api/regencies/${e||m}.json`).then(l=>l.json()).then(l=>x(l))},C=e=>{e.preventDefault(),D(route("member.store"),{onSuccess:()=>{j()}})};return s(k,{children:[t("p",{className:"mb-4",children:o("notify_admin_text")}),s("form",{onSubmit:C,className:"w-full",children:[s("div",{className:"grid lg:grid-cols-2 gap-4 min-w-[50vw]",children:[s("div",{className:"block  items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"total_payment",value:o("form_label_business_type")})}),s("div",{className:"",children:[t(_,{id:"business_type",name:"business_type",value:d.business_type_id,options:h,className:"w-full",labelData:"name",required:!0,valueData:"id",onChange:e=>{i("business_type_id",e.target.value);let l=e.target.selectedIndex;w(e.target[l].text)}}),a.business_type_id&&t("span",{className:"text-red-600",children:a.business_type_id})]})]}),s("div",{className:"flex flex-col gap-3",children:[t(r,{htmlFor:"provinces",value:o("provinces")}),t(_,{options:N,labelData:"name",valueData:"id",placeholder:"select_province",onChange:e=>{const l=e.nativeEvent.target.selectedIndex,p=e.nativeEvent.target[l].text;b(e.target.value),i("province",p)}}),a.provinces&&t("span",{className:"text-red-600",children:a.provinces})]}),s("div",{className:"flex flex-col gap-3",children:[t(r,{htmlFor:"city",value:o("city")}),t(_,{options:g,labelData:"name",valueData:"id",placeholder:"select_city",onChange:e=>{const l=e.nativeEvent.target.selectedIndex,p=e.nativeEvent.target[l].text;i("city",p)}}),a.city&&t("span",{className:"text-red-600",children:a.city})]}),u==="Hotel"&&s("div",{className:"block  items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"no_rooms",value:o("form_label_no_rooms")})}),s("div",{className:"",children:[t(v,{id:"no_rooms",name:"no_rooms",type:"number",min:0,value:d.no_rooms,className:"block w-full",isFocused:!0,onChange:e=>i("no_rooms",e.target.value)}),t("span",{className:"text-red-600",children:a.no_rooms})]})]}),u==="Hotel"&&s("div",{className:"block  items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"no_outlet",value:o("form_label_no_outlet")})}),s("div",{className:"",children:[t(v,{id:"no_outlets",name:"no_outlets",required:!0,type:"number",min:0,value:d.no_outlets,className:"block w-full",isFocused:!0,onChange:e=>i("no_outlets",e.target.value)}),t("span",{className:"text-red-600",children:a.no_outlets})]})]}),s("div",{className:"block items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"no_employees",value:o("form_label_no_employees")})}),s("div",{className:"",children:[t(v,{id:"no_employees",name:"no_employees",type:"number",required:!0,min:0,value:d.no_employees,className:"block w-full",isFocused:!0,onChange:e=>i("no_employees",e.target.value)}),t("span",{className:"text-red-600",children:a.no_employees})]})]})]}),t(I,{color:"secondary",type:"submit",className:"flex justify-center mt-6 w-full",disabled:S,children:o("submit")})]})]})};export{R as default};
