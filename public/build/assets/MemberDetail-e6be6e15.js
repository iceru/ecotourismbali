import{q as X,r as F,W as Y,j as t,a,F as Z,b as M}from"./app-eb310f42.js";import{A as ee}from"./AdminSection-9d6b355b.js";import{A as ae}from"./AdminLayout-44563d22.js";import ie from"./BackTo-37c0ee30.js";import{S as f}from"./SelectInput-7ad7c0bc.js";import{B as u}from"./Button-613be3a1.js";import{l as $}from"./lodash-3e1bf4ed.js";import{m as _}from"./moment-1a7145ab.js";import{b as R}from"./BadgeColor-f0845e7b.js";import{T as m}from"./TextInput-bb92cc2c.js";import{u as le}from"./useTranslation-6a279b16.js";import"./logo-5e7252b7.js";import"./index-6a2e22d1.js";import"./id-410e5203.js";import"./react-responsive-89f0821d.js";import"./index-25fc1de7.js";function Ne(){var N,y,b,C,D,k,I,A,S,B,T,j,E,L;const{member:e,categories:z,programs:O,verified_badges:U,remaining:W,dateAssessment:h,scores:x,lastSession:v,lastPayment:p}=X().props,{t:n}=le(),[d,w]=F.useState(!1),[c,q]=F.useState(e==null?void 0:e.status),{data:l,setData:o,post:V,processing:G,errors:te,reset:H}=Y({category:(e==null?void 0:e.category_id)||"",program:(e==null?void 0:e.program_id)||"",verified_badge:(e==null?void 0:e.verified_badge_id)||"",total_payment:(e==null?void 0:e.total_payment)||"",status:(e==null?void 0:e.status)||null,invoice_no:(p==null?void 0:p.status_code)||null,invoice_item_text:(p==null?void 0:p.invoice_item_text)||null,expired_verified:e==null?void 0:e.expired_verified}),J=i=>{i.preventDefault(),V(route("admin.member.update",e==null?void 0:e.id),{onSuccess:()=>{H(),w(!1)}})};let K=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});const P=[{label:"Inactive",value:""},{label:"Waiting Approval",value:"waiting_approval"},{label:"Payment",value:"payment"},{label:"Active",value:"active"}],s=(i,g)=>t("div",{className:"flex flex-wrap mb-6",children:[a("div",{className:"w-full lg:w-1/4 mb-2 lg:mb-0 pr-6",children:a("div",{className:"font-bold",children:n(i)})}),a("div",{className:"w-full lg:w-3/4",children:g||"-"})]}),Q=()=>{M({url:"/admin/member/invoice/"+(e==null?void 0:e.id),method:"POST",responseType:"blob"}).then(i=>{const g=window.URL.createObjectURL(new Blob([i.data])),r=document.createElement("a");r.href=g,r.setAttribute("download",`invoice-${e==null?void 0:e.business_name}.pdf`),document.body.appendChild(r),r.click()})};return t(ae,{children:[a(ie,{link:"/admin/member/index",title:"back_to_list_members"}),a(ee,{children:t("div",{className:"flex mb-6 flex-wrap",children:[t("div",{className:"lg:w-4/5 pr-4",children:[t("div",{className:"flex flex-wrap items-center mb-6",children:[(e==null?void 0:e.image)&&a("img",{className:"mr-4 w-[100px]",src:`/storage/member/images/${e==null?void 0:e.image}`}),a("div",{className:"font-bold text-2xl",children:e==null?void 0:e.business_name})]}),t("div",{className:"flex gap-4",children:[a(u,{className:"mb-6",onClick:()=>w(!d),color:d?"gray":"primary",children:n(d?"close_edit_member":"edit_member")}),c!=null&&c.includes("active")||c==="payment"?a(u,{className:"mb-6",onClick:()=>Q(),color:"secondary",children:"Download Invoice"}):null,c!=null&&c.includes("active")||c==="payment"?a(u,{className:"mb-6",onClick:()=>editInvoice(),color:"gray",children:"Edit Invoice"}):null]}),t("form",{onSubmit:J,children:[d?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("status")}),a(f,{id:"status",name:"status",value:l==null?void 0:l.status,options:P,className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:i=>{o("status",i.target.value),q(i.target.value)}})]}):s("status",$.capitalize((N=e==null?void 0:e.status)==null?void 0:N.replace("_"," "))),d&&c==="payment"&&t(Z,{children:[t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("invoice_no")}),a(m,{id:"invoice_no",name:"invoice_no",value:l==null?void 0:l.invoice_no,className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:i=>o("invoice_no",i.target.value)})]}),t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("invoice_item_text")}),a(m,{id:"invoice_item_text",name:"invoice_item_text",value:l==null?void 0:l.invoice_item_text,className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:i=>o("invoice_item_text",i.target.value)})]})]}),d&&!((y=e==null?void 0:e.status)!=null&&y.includes("active"))?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("total_payment")}),a(m,{id:"total_payment",name:"total_payment",value:l==null?void 0:l.total_payment,placeholder:"select_total_payment",className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:i=>o("total_payment",i.target.value)})]}):s("total_payment",K.format(e==null?void 0:e.total_payment)),s("email",(b=e==null?void 0:e.user)==null?void 0:b.email),s("address",e==null?void 0:e.address),s("phone",e==null?void 0:e.phone),s("website",e==null?void 0:e.website),s("business_name",e==null?void 0:e.business_name),s("business_type",(C=e==null?void 0:e.business_type)==null?void 0:C.name),d?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("category")}),a(f,{id:"category",name:"category",value:l==null?void 0:l.category,options:z,labelData:"name",placeholder:"select_category",valueData:"id",className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:i=>o("category",i.target.value)})]}):s("category",(D=e==null?void 0:e.category)==null?void 0:D.name),d?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("program")}),a(f,{id:"program",name:"program",value:l==null?void 0:l.program,options:O,className:"lg:w-3/4 w-full mt-2 lg:mt-0",placeholder:"select_program",labelData:"name",valueData:"id",onChange:i=>o("program",i.target.value)})]}):s("program",(k=e==null?void 0:e.program)==null?void 0:k.name),s("assessment_attempt",W),h&&s("assessment_expire",_(h).format("LL")),s("badge",(I=e==null?void 0:e.badge)==null?void 0:I.name),d?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("verified_badge")}),a(f,{id:"verified_badge",name:"verified_badge",value:l==null?void 0:l.verified_badge,options:U,className:"lg:w-3/4 w-full mt-2 lg:mt-0",labelData:"name",placeholder:"select_verify_badge",valueData:"id",onChange:i=>o("verified_badge",i.target.value)})]}):s("verified_badge",(A=e==null?void 0:e.verified_badge)==null?void 0:A.name),d?t("div",{className:"flex flex-wrap items-center mb-6",children:[a("div",{className:"font-bold lg:w-1/4",children:n("expired_verified")}),a(m,{id:"expired_verified",name:"expired_verified",value:l==null?void 0:l.expired_verified,type:"date",className:"lg:w-3/4 w-full mt-2 lg:mt-0",onChange:i=>o("expired_verified",i.target.value)})]}):s("expired_verified",e==null?void 0:e.expired_verified),s("description",e==null?void 0:e.description),d&&a(u,{type:"submit",className:"mt-4",disabled:G,children:n("submit")})]})]}),t("div",{className:"lg:w-1/5 mx-auto flex lg:block gap-12 sticky top-0 lg:border-l pl-4 mt-10 lg:mt-0",children:[e!=null&&e.verified_badge&&(!(e!=null&&e.expired_verified)||_(e==null?void 0:e.expired_verified).isAfter(_()))?t("div",{className:"flex flex-col items-center text-primary uppercase mb-6 pb-4 lg:border-b",children:[a("div",{children:a("img",{className:"max-h-[120px]",src:"/storage/badges/"+((S=e==null?void 0:e.verified_badge)==null?void 0:S.image)})}),t("div",{className:`font-bold mt-1 text-center ${R((B=e==null?void 0:e.badge)==null?void 0:B.name,"text")}`,children:[(T=e==null?void 0:e.verified_badge)==null?void 0:T.name," Verified Badge"]})]}):null,e!=null&&e.badge?t("div",{children:[t("div",{className:"flex flex-col items-center  uppercase mb-1",children:[a("div",{children:a("img",{className:"max-h-[120px]",src:"/storage/badges/"+((j=e==null?void 0:e.badge)==null?void 0:j.image)})}),t("div",{className:`font-bold mt-1 ${R((E=e==null?void 0:e.badge)==null?void 0:E.name,"text")}`,children:[(L=e==null?void 0:e.badge)==null?void 0:L.name," Badge"]})]}),v&&t("div",{className:"text-center text-gray-500  text-xs mb-3",children:[a("span",{className:"font-bold",children:v==null?void 0:v.total_score}),"Â ",a("span",{className:" uppercase",children:"Points"})]}),x==null?void 0:x.map(i=>{var g,r;return t("div",{className:"flex justify-center text-gray-500 text-xs mb-1",children:[a("div",{className:"capitalize",children:(r=$.lowerCase((g=i==null?void 0:i.assessment)==null?void 0:g.title))==null?void 0:r.slice(0,11)}),a("div",{className:"mx-1",children:"-"}),a("div",{children:i==null?void 0:i.score})]})})]}):a("div",{className:"bg-slate-600 text-white rounded-full px-3 py-1 font-bold inline-block",children:"No Badge"})]})]})})]})}export{Ne as default};
