import{s as G,o as A,r as m,q as E,j as t,a,F as c,y as C}from"./app-2f14b1d8.js";import{F as T,s as R,E as q}from"./index-5f6f5624.js";import{q as B}from"./base-e8aaf39e.js";import{a as K}from"./moment-a8f86fe2.js";import{A as d}from"./AdminSection-30d54e82.js";import{B as _}from"./Button-d0547ed4.js";import{M as O}from"./MemberLayout-bce179a4.js";import h from"./TitleSection-fff04201.js";import W from"./MemberBadge-d66f3c22.js";import U from"./MemberDashboardForm-37be3a59.js";import z from"./MemberGreenpal-b6e695a7.js";import{g as Q}from"./greenpal-f0e012ed.js";import{u as V}from"./useTranslation-26b2fcf0.js";import"./id-410e5203.js";import"./no-image-91387054.js";import"./react-responsive-0211b0fd.js";import"./moment-fbc5633a.js";import"./lodash-cdb7bb53.js";import"./InputLabel-5ba898bd.js";import"./SelectInput-6408a722.js";import"./TextInput-e8e68f38.js";(function(e,y){(function(o,l){l(typeof G=="function"?K:o.moment)})(A,function(o){//! moment.js locale configuration
var l=o.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(s,i){if(s===12&&(s=0),i==="pagi")return s;if(i==="siang")return s>=11?s:s+12;if(i==="sore"||i==="malam")return s+12},meridiem:function(s,i,n){return s<11?"pagi":s<15?"siang":s<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});return l})})();const f=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});function he({member:e,scores:y,lastSession:o,business_type:l,expiredDate:s,categories:i}){var M,N,S,v,L,w,P,D;const{t:n}=V(),[Y,x]=m.useState(!1),[j,p]=m.useState(!1),F=B.parse(location.search),{flash:k}=E().props,H=sessionStorage.getItem("paid");let g=sessionStorage.getItem("snapToken");const I=()=>{const r=u=>{snap.pay(u,{onSuccess:function(){x(!0),p(!1),sessionStorage.clear("snapToken"),sessionStorage.setItem("paid",!0),C.visit("/member/dashboard?newPayment=true")},onPending:function(){p(!0)},onError:function(){p(!1),sessionStorage.clear("snapToken")},onClose:function(){p(!0)}})};g?r(g):axios.post(route("member_payment.new_payment"),{}).then(function(u){sessionStorage.setItem("snapToken",u.data),r(u.data)})},J=()=>{sessionStorage.clear("snapToken")};return m.useEffect(()=>{F.newPayment&&x(!0)},[]),t(O,{children:[Y||H?a("div",{className:"px-4 py-3 bg-primary text-white rounded-md inline-flex mb-4",children:n("pay_complete")}):null,j&&a("div",{className:"px-4 py-3 bg-yellow-300 rounded-md inline-flex mb-4 transition",children:n("pay_pending")}),k.success&&a("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl relative mb-3",children:a("span",{className:"inline",children:k.success})}),t("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[((M=e==null?void 0:e.program)==null?void 0:M.name)==="Green Pal"&&t(c,{children:[t(d,{children:[a(h,{title:"welcome_greenpal",className:"mb-4"}),t("div",{className:"flex",children:[a("img",{src:Q,className:"h-[120px] mr-4",alt:"Green Pal"}),a("p",{className:"text-sm text-justify mb-2",children:n("greenpal_info")})]})]}),t(d,{children:[a(h,{title:"greenpal_community",className:"mb-4"}),a("p",{className:"text-sm text-justify mb-2",children:n("greenpal_text")}),a("p",{className:"text-sm text-justify",children:n("greenpal_text_2")})]})]}),((N=e==null?void 0:e.program)==null?void 0:N.name)!=="Green Pal"&&t(c,{children:[t(d,{children:[a(h,{title:"welcome_member",className:"mb-4"}),a("div",{children:t(_,{as:"link",href:route("member.profile"),className:"mb-4 !inline-block",color:"lightPrimary",children:[n("edit_profile"),a(T,{className:"ml-2",icon:R})]})}),((S=e==null?void 0:e.status)==null?void 0:S.includes("active"))&&((v=e==null?void 0:e.program)==null?void 0:v.name)!=="Green Pal"&&a("div",{children:t(_,{className:"!inline-block",as:"link",href:route("member.module.index"),color:"lightSecondary",children:[n("start_learning"),a(T,{icon:q,className:"ml-2"})]})})]}),a(d,{children:a(W,{member:e,lastSession:o,scores:y,expiredDate:s})})]})]}),!((L=e==null?void 0:e.status)!=null&&L.includes("active"))&&t(d,{className:"flex flex-col items-center justify-center gap-4",children:[((w=e==null?void 0:e.program)==null?void 0:w.name)!=="Green Pal"&&a("h2",{className:"font-bold text-xl",children:n("member_not_active")}),(e==null?void 0:e.status)==="payment"&&(e!=null&&e.total_payment)?t(c,{children:[a("p",{className:"text-sm",children:n("member_locked_text")}),t("div",{className:"flex flex-wrap justify-between w-full lg:w-2/3 items-center bg-lightSecondary bg-opacity-60 rounded-2xl p-6 mt-4",children:[t("div",{className:" mb-4 lg:mb-0",children:[a("p",{children:n("total_payment")}),a("h4",{className:"text-2xl font-bold mb-2",children:((P=e==null?void 0:e.business_type)==null?void 0:P.id)===1?t("span",{children:[a("strike",{children:f.format(12e6)}),a("span",{className:"ml-2 text-red-600 text-3xl",children:f.format(e==null?void 0:e.total_payment)})]}):t("span",{children:[a("strike",{children:f.format(9e6)}),a("span",{className:"ml-2 text-red-600 text-3xl",children:f.format(e==null?void 0:e.total_payment)})]})}),t("p",{children:["Secure our launch price ",a("strong",{children:"Exp 31 Oct 2024"})]})]}),t("div",{className:"flex items-center",children:[g&&a(_,{className:"text-[16px] mr-4",color:"danger",onClick:J,children:n("reset_pay")}),a(_,{className:"text-[16px] ",onClick:()=>{var r;return(r=e==null?void 0:e.status)!=null&&r.includes("active")?null:I()},children:n("member_locked_button")})]})]})]}):(e==null?void 0:e.status)==="waiting_approval"?a(c,{children:a("p",{children:n("member_not_approved")})}):a(c,{children:((D=e==null?void 0:e.program)==null?void 0:D.name)!=="Green Pal"?a(U,{business_type:l,member:e}):a(z,{member:e,categories:i})})]})]})}export{he as default};
