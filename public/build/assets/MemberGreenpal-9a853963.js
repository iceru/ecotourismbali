import{r as m,W as I,b as e,j as l,F as E}from"./app-cdc8cd06.js";import{P as h}from"./PrimaryButton-6ccd38ab.js";import{I as o}from"./InputLabel-a1b7b244.js";import{T as d}from"./TextInput-32e4389f.js";import{S as v}from"./SelectInput-fc227df9.js";import{u as D}from"./useTranslation-1518e01b.js";const W=({member:i})=>{const b=localStorage.getItem("agreement"),{t}=D(),[_,f]=m.useState(b||!1),[N,y]=m.useState(),[u,w]=m.useState(),[x,F]=m.useState(),{data:n,setData:r,post:j,processing:C,errors:s,reset:P}=I({company_name:i.company_name||null,business_name:i.business_name||null,address:i.address||null,image:i.image||null,sliders:null,name:i.user.name||null,position:i.position||null,email:i.user.email||null,phone:i.phone||null,description:i.description||null,city:i.city||null,province:i.province||null,address:i.address||null,website:i.website||null});m.useEffect(()=>{fetch("https://iceru.github.io/api-wilayah-indonesia/api/provinces.json").then(a=>a.json()).then(a=>{y(a);let c;n!=null&&n.province&&(c=a.find(p=>p.name===(n==null?void 0:n.province))),g(u||c.id||a[0].id)})},[]),m.useEffect(()=>{u&&g(u)},[u]);const g=a=>{fetch(`https://iceru.github.io/api-wilayah-indonesia/api/regencies/${a||u}.json`).then(c=>c.json()).then(c=>F(c))},S=a=>{a.preventDefault(),j(route("member.greenpal.store"),{onSuccess:()=>{}})},k=()=>{f(!0),localStorage.setItem("agreement",!0)};return e("div",{children:_?e(E,{children:l("form",{onSubmit:S,className:"w-full",children:[l("div",{className:"grid lg:grid-cols-2 gap-6 min-w-[50vw]",children:[l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"name",value:t("label_name_pic")}),e(d,{id:"name",name:"name",value:n.name,className:"block w-full",isFocused:!0,rows:8,onChange:a=>r("name",a.target.value)}),s.name&&e("span",{className:"text-red-600",children:s.name})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"job_title",value:t("label_job_title")}),e(d,{id:"job_title",name:"job_title",value:n.job_title,className:"block w-full",isFocused:!0,rows:8,onChange:a=>r("job_title",a.target.value)}),s.job_title&&e("span",{className:"text-red-600",children:s.job_title})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"business_name",value:t("label_business_name")}),e(d,{id:"business_name",name:"business_name",value:n.business_name,className:"block w-full",isFocused:!0,onChange:a=>r("business_name",a.target.value)}),s.business_name&&e("span",{className:"text-red-600",children:s.business_name})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"company_name",value:t("label_company_name")}),e(d,{id:"company_name",name:"company_name",value:n.company_name,className:"block w-full",isFocused:!0,onChange:a=>r("company_name",a.target.value)}),s.company_name&&e("span",{className:"text-red-600",children:s.company_name})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"email",value:t("label_email")}),e(d,{id:"email",name:"email",value:n.email,className:"block w-full",isFocused:!0,rows:8,onChange:a=>r("email",a.target.value)}),s.email&&e("span",{className:"text-red-600",children:s.email})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"phone",value:t("label_phone")}),e(d,{id:"phone",name:"phone",value:n.phone,className:"block w-full",isFocused:!0,type:"tel",onChange:a=>r("phone",a.target.value)}),s.phone&&e("span",{className:"text-red-600",children:s.phone})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"company_logo",value:t("company_logo")}),e("div",{children:e("input",{className:"mb-3",type:"file",name:"image",id:"image",onChange:a=>r("image",a.target.files[0])})})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"company_product",value:t("company_product")}),e("input",{className:"block w-full text-gray-900 border border-gray-300 p-2 cursor-pointer bg-gray-50 focus:outline-none",id:"sliders",multiple:!0,type:"file",name:"sliders",onChange:a=>{r("sliders",a.target.files)}})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"website",value:t("website")}),e(d,{id:"website",name:"website",value:n.website,className:"block w-full",isFocused:!0,onChange:a=>r("website",a.target.value)})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"description",value:t("description")}),e(d,{id:"description",name:"description",value:n.description,className:"block w-full",isFocused:!0,onChange:a=>r("description",a.target.value)})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"provinces",value:t("provinces")}),e(v,{options:N,labelData:"name",valueData:"id",placeholder:"select_province",onChange:a=>{const c=a.nativeEvent.target.selectedIndex,p=a.nativeEvent.target[c].text;w(a.target.value),r("province",p)}}),s.provinces&&e("span",{className:"text-red-600",children:s.provinces})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"city",value:t("city")}),e(v,{options:x,labelData:"name",valueData:"id",placeholder:"select_city",onChange:a=>{const c=a.nativeEvent.target.selectedIndex,p=a.nativeEvent.target[c].text;r("city",p)}}),s.city&&e("span",{className:"text-red-600",children:s.city})]}),l("div",{className:"grid gap-3",children:[e(o,{htmlFor:"address",value:t("address")}),e(d,{id:"address",name:"address",value:n.address,className:"block w-full",isFocused:!0,onChange:a=>r("address",a.target.value)}),s.address&&e("span",{className:"text-red-600",children:s.address})]})]}),e(h,{type:"submit",className:"w-full justify-center flex mt-4",disabled:C,children:t("submit")})]})}):l("div",{children:[e("h4",{className:"font-bold mb-2 text-lg",children:t("agreement_title")}),e("p",{className:"mb-4",children:t("agreement_text")}),e(h,{onClick:k,children:t("agreement_button")})]})})};export{W as default};
