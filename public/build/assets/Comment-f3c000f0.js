import{W as L,j as e,a as i,F as _}from"./app-7768b092.js";import{h as c}from"./moment-fbc5633a.js";import{T as A}from"./TextInput-bc5c19ea.js";import{B as o}from"./Button-8d9cbdc2.js";import{b as $}from"./BadgeColor-8ab0aee9.js";import{l as k}from"./lodash-3d807e21.js";import{F as B,B as D}from"./index-6ff4a2d5.js";import{F as E}from"./FileSaver.min-b94d3d5f.js";import{u as S}from"./useTranslation-03ef7071.js";function O({comment:a,type:r,member:d,thread:f,images:h}){var u,v,N,w,b,n;const s=r==="input"?d:a==null?void 0:a.member,{t:p}=S(),{data:y,setData:x,post:g,errors:T}=L({thread_id:f==null?void 0:f.id,text:""}),F=l=>{l.preventDefault(),g(route("member.forum.comment.store"),{onSuccess:()=>{x("text","")}})},j=(l,t)=>{E.saveAs(`/storage/threads/files/${t}`,t)},C=(l,t)=>{l.preventDefault(),confirm("Are you sure to delete the comment?")&&g(route("member.forum.comment.destroy",t))};return e("div",{className:`p-6 rounded-xl flex gap-6 bg-opacity-30 shadow-lg flex-wrap lg:flex-nowrap ${r==="thread"?"bg-lightPrimary w-full":"bg-white lg:w-[90%] ml-auto"}`,children:[e("div",{className:"flex",children:[i("div",{className:"w-[48px] mr-3 mt-0.5",children:i("img",{src:`/storage/member/images/${s==null?void 0:s.image}`,alt:""})}),e("div",{children:[i("h4",{className:"text-lg font-bold",children:s==null?void 0:s.business_name}),i("div",{className:"flex gap-2 items-center",children:(s==null?void 0:s.verified_badge_id)&&e(_,{children:[i("div",{className:"h-[32px] w-[24px]",children:i("img",{className:"h-full object-contain w-full",src:"/storage/badges/"+((u=s==null?void 0:s.verified_badge)==null?void 0:u.image)})}),e("div",{className:`text-center whitespace-nowrap text-sm ${$((v=s==null?void 0:s.verified_badge)==null?void 0:v.name,"text")}`,children:[(N=s==null?void 0:s.verified_badge)==null?void 0:N.name," Member"]})]})})]})]}),i("div",{className:"w-full ",children:r==="input"?e("form",{onSubmit:F,children:[i("div",{className:"font-bold text-sm text-primary mb-2",children:c().format("LLL")}),i(A,{typeForm:"textarea",className:"border mb-4 w-full",row:5,placeholder:"Add Comment",value:y.text,onChange:l=>x("text",l.target.value)}),i(o,{children:p("submit")})]}):e(_,{children:[e("div",{className:"flex justify-between items-center",children:[i("div",{className:"font-bold text-sm text-primary mb-2",children:c(a==null?void 0:a.created_at).format("LLL")}),r!=="thread"&&(d==null?void 0:d.id)===((w=a==null?void 0:a.member)==null?void 0:w.id)&&i(o,{color:"danger",className:"!text-xs",onClick:l=>{C(l,a==null?void 0:a.id)},children:p("delete")})]}),!k.isEmpty(h)&&i("div",{className:"flex justify-center gap-6 mb-5",children:h.map(l=>i("img",{className:"max-h-[200px] object-contain",src:"/storage/threads/images/"+l,alt:""}))}),i("div",{className:"mb-4",children:a==null?void 0:a.text}),(a==null?void 0:a.file)&&e(o,{color:"primary",onClick:l=>j(l,a==null?void 0:a.file),title:a==null?void 0:a.file,children:[i(B,{icon:D,className:"mr-2"})," ",((b=a==null?void 0:a.file)==null?void 0:b.length)>30?((n=a==null?void 0:a.file)==null?void 0:n.slice(0,30))+"....":a==null?void 0:a.file]})]})})]})}export{O as default};
