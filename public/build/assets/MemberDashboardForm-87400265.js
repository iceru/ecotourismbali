import{r as c,W as E,j as s,F as P,b as t}from"./app-13d8cc7b.js";import{I as r}from"./InputLabel-d1d32adc.js";import{S as d}from"./SelectInput-5db5b86b.js";import{T as _}from"./TextInput-4637ddc4.js";import{P as R}from"./PrimaryButton-92f27e01.js";import{u as A}from"./useTranslation-e6f9aaa7.js";const L=({business_type:h,member:a})=>{var N;const{t:n}=A(),[p,g]=c.useState(),[x,F]=c.useState(),[D,w]=c.useState(),[u,S]=c.useState(((N=a==null?void 0:a.business_type)==null?void 0:N.name)||"Hotel");console.log(a);const y=[{label:"Access to Self Assessment",value:5e5},{label:"Green/Publish Rate IDR 0 - 1.500.000",value:2e6},{label:"Branch/Publish Rate IDR 1.500.001 - 3.000.000",value:6e6},{label:"Root/Publish Rate Above IDR 3.000.000",value:12e6}],b=[{label:"Access to Self Assessment",value:5e5},{label:"Annual Membership",value:15e5}],{data:m,setData:o,post:I,processing:C,errors:l,reset:j}=E({no_rooms:a.no_rooms||null,no_employees:a.no_employees||null,no_outlets:a.no_outlets||null,business_type_id:a.business_type_id||h[0].id||null,total_payment:u==="Hotel"?y[0].value:b[0].value,city:a.city||"",province:a.province||""});c.useEffect(()=>{fetch("https://iceru.github.io/api-wilayah-indonesia/api/provinces.json").then(e=>e.json()).then(e=>{w(e),f(p||e[0].id)})},[]),c.useEffect(()=>{f()},[p]),c.useEffect(()=>{u==="Restaurant"&&(o(e=>({...e,no_outlets:null})),o(e=>({...e,no_rooms:null})))},[u]);const f=e=>{fetch(`https://iceru.github.io/api-wilayah-indonesia/api/regencies/${e||p}.json`).then(i=>i.json()).then(i=>F(i))},k=e=>{e.preventDefault(),I(route("member.store"),{onSuccess:()=>{j()}})};return s(P,{children:[t("p",{className:"mb-4",children:n("notify_admin_text")}),s("form",{onSubmit:k,className:"w-full",children:[s("div",{className:"grid lg:grid-cols-2 gap-4 min-w-[50vw]",children:[s("div",{className:"block  items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"total_payment",value:n("form_label_business_type")})}),s("div",{className:"",children:[t(d,{id:"business_type",name:"business_type",value:m.business_type_id,options:h,className:"w-full",labelData:"name",required:!0,valueData:"id",onChange:e=>{o("business_type_id",e.target.value);let i=e.target.selectedIndex;S(e.target[i].text)}}),l.business_type_id&&t("span",{className:"text-red-600",children:l.business_type_id})]})]}),s("div",{className:"flex flex-col gap-3",children:[t(r,{htmlFor:"provinces",value:n("provinces")}),t(d,{options:D,labelData:"name",valueData:"id",placeholder:"select_province",onChange:e=>{const i=e.nativeEvent.target.selectedIndex,v=e.nativeEvent.target[i].text;g(e.target.value),o("province",v)}}),l.provinces&&t("span",{className:"text-red-600",children:l.provinces})]}),s("div",{className:"flex flex-col gap-3",children:[t(r,{htmlFor:"city",value:n("city")}),t(d,{options:x,labelData:"name",valueData:"id",placeholder:"select_city",onChange:e=>{const i=e.nativeEvent.target.selectedIndex,v=e.nativeEvent.target[i].text;o("city",v)}}),l.city&&t("span",{className:"text-red-600",children:l.city})]}),u==="Hotel"&&s("div",{className:"block  items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"no_rooms",value:n("form_label_no_rooms")})}),s("div",{className:"",children:[t(_,{id:"no_rooms",name:"no_rooms",type:"number",min:0,value:m.no_rooms,className:"block w-full",isFocused:!0,onChange:e=>o("no_rooms",e.target.value)}),t("span",{className:"text-red-600",children:l.no_rooms})]})]}),u==="Hotel"&&s("div",{className:"block  items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"no_outlet",value:n("form_label_no_outlet")})}),s("div",{className:"",children:[t(_,{id:"no_outlets",name:"no_outlets",required:!0,type:"number",min:0,value:m.no_outlets,className:"block w-full",isFocused:!0,onChange:e=>o("no_outlets",e.target.value)}),t("span",{className:"text-red-600",children:l.no_outlets})]})]}),s("div",{className:"block items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"no_employees",value:n("form_label_no_employees")})}),s("div",{className:"",children:[t(_,{id:"no_employees",name:"no_employees",type:"number",required:!0,min:0,value:m.no_employees,className:"block w-full",isFocused:!0,onChange:e=>o("no_employees",e.target.value)}),t("span",{className:"text-red-600",children:l.no_employees})]})]}),s("div",{className:"block items-center",children:[t("div",{className:"mb-2",children:t(r,{htmlFor:"total_payment",value:n("form_label_total_payment")})}),s("div",{className:"",children:[t(d,{id:"total_payment",name:"total_payment",value:m.total_payment,options:u==="Hotel"?y:b,className:"w-full ",onChange:e=>o("total_payment",e.target.value)}),t("span",{className:"text-red-600",children:l.total_payment})]})]})]}),t(R,{color:"secondary",type:"submit",className:"flex justify-center mt-6 w-full",disabled:C,children:n("submit")})]})]})};export{L as default};
