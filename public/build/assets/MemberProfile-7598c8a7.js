import{q as O,r,a as i,j as a}from"./app-eb310f42.js";import{F as e,I as _,J as P,z as F,a as S,H as j}from"./index-6a2e22d1.js";import{S as M}from"./index-559623de.js";import"./FileSaver.min-d6555af7.js";import{A as R}from"./AdminSection-9d6b355b.js";import{M as D}from"./MemberLayout-a8628bd7.js";import{B as f}from"./Button-613be3a1.js";import{n as H}from"./no-image-91387054.js";import"./lodash-3e1bf4ed.js";import{c as U,b as W,e as q,g as z}from"./index-25fc1de7.js";import{h}from"./moment-fbc5633a.js";import{u as G}from"./useTranslation-6a279b16.js";import"./id-410e5203.js";import"./react-responsive-89f0821d.js";function J(t){let c=t;return t&&(t.toString().indexOf("62")===0?c=t.toString().slice(2):t.toString().indexOf("+62")===0?c=t.toString().slice(3):t.toString().indexOf("0062")===0?c=t.toString().slice(4):t.toString().indexOf("0")===0&&(c=t.toString().slice(1))),c}function K(t){return!t||Number.isNaN(t)?null:62+J(t)}function ot({member:t,scores:c,lastSession:Q,expiredDate:V}){var x,u,N,w,v,y;const{t:l}=G(),{flash:g}=O().props,k={dots:!0,infinite:!0,speed:500,slidesToShow:t.member_slider.length>1?2:t.member_slider.length,slidesToScroll:1},p=r.useRef(null),[I,$]=r.useState(null),A=s=>{const n=p.current,d=n.getContext("2d"),o=new Image;o.src=s,o.onload=()=>{d.drawImage(o,0,0,n.width,n.height),d.font="40px Arial",d.fillStyle="black",d.textAlign="center";const L=t!=null&&t.expired_verified?"Expired "+h(t==null?void 0:t.expired_verified).format("LL"):"",B=n.width/2,C=n.height-20;d.fillText(L,B,C);const E=n.toDataURL("image/png");$(E)}},T=()=>{const s=document.createElement("a");s.href=I,s.download="badge.png",s.click()};return r.useEffect(()=>{var s;A(`/storage/badges/${(s=t==null?void 0:t.verified_badge)==null?void 0:s.image}`)},[t]),i(D,{children:a(R,{children:[i("h2",{className:"font-bold text-xl mb-4",children:l("my_profile")}),g.success&&a("div",{className:"bg-green-100 border border-green-400 mb-3 text-green-700 px-4 py-3 rounded relative",children:[i("strong",{className:"font-bold mr-2",children:"Success!"}),i("span",{className:"inline",children:g.success})]}),a(f,{as:"link",href:route("member.profile.edit",t==null?void 0:t.id),className:"mb-6 flex items-center gap-2",children:[l("edit_profile"),i(e,{icon:_})]}),a(f,{as:"link",href:route("profile.edit",t==null?void 0:t.id),className:"mb-6 flex items-center gap-2 mx-4",color:"secondary",children:[l("change_password"),i(e,{icon:P})]}),i("canvas",{ref:p,width:500,height:500,style:{display:"none"}}),t!=null&&t.verified_badge_id&&(!(t!=null&&t.expired_verified)||h(t==null?void 0:t.expired_verified).isAfter(h()))?i(f,{color:"orange",onClick:()=>{var s;return T(`/storage/badges/${(s=t==null?void 0:t.verified_badge)==null?void 0:s.image}`)},children:l("download_badge")}):null,i("div",{className:"flex flex-wrap",children:a("div",{className:"w-full mb-4 lg:mb-0",children:[a("div",{className:"flex items-center mb-10",children:[i("div",{className:"w-24 h-24 bg-primary bg-opacity-10 flex justify-center items-center rounded-full ",children:t.image?i("img",{className:"w-24 h-24 object-contain rounded-full",src:`/storage/member/images/${t.image}`,alt:""}):i("img",{className:"w-24 h-24 rounded-full",src:H,alt:""})}),a("div",{className:"ml-4",children:[i("h3",{className:"font-bold text-lg",children:t.business_name||"Business Name"}),t.category&&i("h6",{className:"uppercase text-primary",children:(x=t.category)==null?void 0:x.name}),t.program&&i("h6",{className:"text-sm",children:(u=t.program)==null?void 0:u.name})]})]}),i("div",{className:"mb-10",children:t.member_slider.length>0?i("div",{className:"-mx-2",children:i(M,{...k,children:t.member_slider.map(s=>i("div",{className:"px-2",children:i("div",{class:"relative overflow-hidden pb-2/3",children:i("img",{src:`/storage/member/sliders/${s.image}`,alt:"",class:"absolute h-full w-full object-cover p-2"})})}))})}):a("div",{className:"flex gap-2 text-gray-600 justify-center items-center p-6 py-12 border rounded-lg border-dashed border-gray-600",children:[l("add_slider"),i(e,{icon:F})]})}),a("div",{className:"flex justify-center gap-8 mb-10",children:[i("div",{children:t!=null&&t.address?a("div",{className:"flex gap-2 text-gray-600 justify-center items-center",children:[i(e,{icon:S}),i("div",{children:t.address})]}):a("a",{className:"flex gap-2 text-gray-600 justify-center items-center cursor-pointer",href:route("member.profile.edit",t==null?void 0:t.id),children:[l("add_address"),i(e,{icon:S})]})}),i("div",{children:t!=null&&t.website?a("div",{className:"flex gap-2 text-gray-600 justify-center items-center",children:[i(e,{icon:j}),i("div",{children:t.website})]}):a("a",{className:"flex gap-2 text-gray-600 justify-center items-center cursor-pointer",href:route("member.profile.edit",t==null?void 0:t.id),children:[l("add_website"),i(e,{icon:j})]})})]}),i("div",{className:"mb-6",children:t!=null&&t.description?i("div",{className:"text-justify",children:t.description}):a("a",{className:"flex gap-2 text-gray-600 justify-center items-center cursor-pointer",href:route("member.profile.edit",t==null?void 0:t.id),children:[l("add_description"),i(e,{icon:_})]})}),a("div",{className:"flex justify-between items-end gap-6",children:[a("div",{className:"flex gap-6 h-fit",children:[t.facebook&&i("div",{className:"w-12 h-12 flex justify-center items-center rounded-full bg-primary text-white",children:i("a",{href:(N=t==null?void 0:t.facebook)!=null&&N.includes("http")?t.facebook:`https://${t.facebook}`,target:"_blank",className:"mt-1",children:i(e,{icon:U,className:"text-2xl"})})}),t.instagram&&i("div",{className:"w-12 h-12 flex justify-center items-center rounded-full bg-primary text-white",children:i("a",{href:(w=t.instagram)!=null&&w.includes("http")?t.instagram:`https://${t.instagram}`,target:"_blank",className:"mt-1",children:i(e,{icon:W,className:"text-2xl"})})}),t.whatsapp&&i("div",{className:"w-12 h-12 flex justify-center items-center rounded-full bg-primary text-white",children:i("a",{href:(v=t.whatsapp)!=null&&v.includes("http")?t.whatsapp:`https://wa.me/${K(t.whatsapp)}`,target:"_blank",className:"mt-1",children:i(e,{icon:q,className:"text-2xl"})})}),t.twitter&&i("div",{className:"w-12 h-12 flex justify-center items-center rounded-full bg-primary text-white",children:i("a",{href:(y=t.twitter)!=null&&y.includes("http")?t.twitter:`https://${t.twitter}`,target:"_blank",className:"mt-1",children:i(e,{icon:z,className:"text-2xl"})})})]}),(t==null?void 0:t.merchant_promo)&&a("div",{className:"bg-primary text-white p-4 rounded-xl",children:[i("h5",{className:"font-semibold text-lg mb-2",children:l("merchant_promo")}),i("p",{children:t==null?void 0:t.merchant_promo})]})]})]})})]})})}export{ot as default};
