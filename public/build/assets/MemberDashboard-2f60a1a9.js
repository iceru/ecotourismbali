import{p as I,c as J,r as f,q as G,j as t,a,F as c,s as A}from"./app-008ede45.js";import{F as P,m as C,r as E}from"./index-1c03bfac.js";import{q as R}from"./base-e8aaf39e.js";import{a as q}from"./moment-f8259af2.js";import{A as p}from"./AdminSection-3bdcce23.js";import{P as m}from"./PrimaryButton-7172b0d6.js";import{M as K}from"./MemberLayout-2fca1a3e.js";import g from"./TitleSection-76f3f8ed.js";import B from"./MemberBadge-df2e35a2.js";import O from"./MemberDashboardForm-f39fb6ba.js";import W from"./MemberGreenpal-aa55137d.js";import{g as U}from"./greenpal-f0e012ed.js";import{u as z}from"./useTranslation-05fd681a.js";import"./id-410e5203.js";import"./react-responsive-fb182ff5.js";import"./moment-fbc5633a.js";import"./lodash-e58e96a0.js";import"./BadgeColor-b3608778.js";import"./InputLabel-6b7c7e68.js";import"./SelectInput-b3636076.js";import"./TextInput-d288c00f.js";(function(e,h){(function(o,l){l(typeof I=="function"?q:o.moment)})(J,function(o){//! moment.js locale configuration
var l=o.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(s,i){if(s===12&&(s=0),i==="pagi")return s;if(i==="siang")return s>=11?s:s+12;if(i==="sore"||i==="malam")return s+12},meridiem:function(s,i,n){return s<11?"pagi":s<15?"siang":s<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});return l})})();const Q=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});function ge({member:e,scores:h,lastSession:o,business_type:l,expiredDate:s,categories:i}){var k,M,S,N,v,L,w;const{t:n}=z(),[D,y]=f.useState(!1),[T,d]=f.useState(!1),Y=R.parse(location.search),{flash:x}=G().props,j=sessionStorage.getItem("paid");let _=sessionStorage.getItem("snapToken");const F=()=>{const r=u=>{snap.pay(u,{onSuccess:function(){y(!0),d(!1),sessionStorage.clear("snapToken"),sessionStorage.setItem("paid",!0),A.visit("/member/dashboard?newPayment=true")},onPending:function(){d(!0)},onError:function(){d(!1),sessionStorage.clear("snapToken")},onClose:function(){d(!0)}})};_?r(_):axios.post(route("member_payment.new_payment"),{}).then(function(u){sessionStorage.setItem("snapToken",u.data),r(u.data)})},H=()=>{sessionStorage.clear("snapToken")};return f.useEffect(()=>{Y.newPayment&&y(!0)},[]),t(K,{children:[D||j?a("div",{className:"px-4 py-3 bg-primary text-white rounded-md inline-flex mb-4",children:n("pay_complete")}):null,T&&a("div",{className:"px-4 py-3 bg-yellow-300 rounded-md inline-flex mb-4 transition",children:n("pay_pending")}),x.success&&a("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl relative mb-3",children:a("span",{className:"inline",children:x.success})}),t("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[((k=e==null?void 0:e.program)==null?void 0:k.name)==="Green Pal"&&t(c,{children:[t(p,{children:[a(g,{title:"welcome_greenpal",className:"mb-4"}),t("div",{className:"flex",children:[a("img",{src:U,className:"h-[120px] mr-4",alt:"Green Pal"}),a("p",{className:"text-sm text-justify mb-2",children:n("greenpal_info")})]})]}),t(p,{children:[a(g,{title:"greenpal_community",className:"mb-4"}),a("p",{className:"text-sm text-justify mb-2",children:n("greenpal_text")}),a("p",{className:"text-sm text-justify",children:n("greenpal_text_2")})]})]}),((M=e==null?void 0:e.program)==null?void 0:M.name)!=="Green Pal"&&t(c,{children:[t(p,{children:[a(g,{title:"welcome_member",className:"mb-4"}),a("div",{children:t(m,{as:"link",href:route("member.profile"),className:"mb-4 !inline-block",color:"lightPrimary",children:[n("edit_profile"),a(P,{className:"ml-2",icon:C})]})}),((S=e==null?void 0:e.status)==null?void 0:S.includes("active"))&&((N=e==null?void 0:e.program)==null?void 0:N.name)!=="Green Pal"&&a("div",{children:t(m,{className:"!inline-block",as:"link",href:route("member.module.index"),color:"lightSecondary",children:[n("start_learning"),a(P,{icon:E,className:"ml-2"})]})})]}),a(p,{children:a(B,{member:e,lastSession:o,scores:h,expiredDate:s})})]})]}),!((v=e==null?void 0:e.status)!=null&&v.includes("active"))&&t(p,{className:"flex flex-col items-center justify-center gap-4",children:[((L=e==null?void 0:e.program)==null?void 0:L.name)!=="Green Pal"&&a("h2",{className:"font-bold text-xl",children:n("member_not_active")}),(e==null?void 0:e.status)==="payment"&&(e!=null&&e.total_payment)?t(c,{children:[a("p",{className:"text-sm",children:n("member_locked_text")}),t("div",{className:"flex flex-wrap justify-between w-full lg:w-2/3 items-center bg-lightSecondary bg-opacity-60 rounded-2xl p-6 mt-4",children:[t("div",{className:" mb-4 lg:mb-0",children:[a("p",{children:n("total_payment")}),a("h4",{className:"text-2xl font-bold",children:Q.format(e==null?void 0:e.total_payment)})]}),t("div",{className:"flex items-center",children:[_&&a(m,{className:"text-[16px] mr-4",color:"danger",onClick:H,children:n("reset_pay")}),a(m,{className:"text-[16px] ",onClick:()=>{var r;return(r=e==null?void 0:e.status)!=null&&r.includes("active")?null:F()},children:n("member_locked_button")})]})]})]}):(e==null?void 0:e.status)==="waiting_approval"?a(c,{children:a("p",{children:n("member_not_approved")})}):a(c,{children:((w=e==null?void 0:e.program)==null?void 0:w.name)!=="Green Pal"?a(O,{business_type:l,member:e}):a(W,{member:e,categories:i})})]})]})}export{ge as default};
