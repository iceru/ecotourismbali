import{W as A,j as e,a as s,F as y}from"./app-eb310f42.js";import{h as f}from"./moment-fbc5633a.js";import{T as c}from"./TextInput-bb92cc2c.js";import{B as p}from"./Button-613be3a1.js";import{b as $}from"./BadgeColor-f0845e7b.js";import{l as k}from"./lodash-3e1bf4ed.js";import{F as B,B as D}from"./index-6a2e22d1.js";import{F as E}from"./FileSaver.min-d6555af7.js";import{u as S}from"./useTranslation-6a279b16.js";function O({comment:a,type:d,member:r,thread:o,images:x}){var u,N,w,b,_,n;const i=d==="input"?r:a==null?void 0:a.member,{t:h}=S(),{data:F,setData:g,post:v,errors:T}=A({thread_id:o==null?void 0:o.id,text:""}),j=l=>{l.preventDefault(),v(route("member.forum.comment.store"),{onSuccess:()=>{g("text","")}})},C=(l,t)=>{E.saveAs(`/storage/threads/files/${t}`,t)},L=(l,t)=>{l.preventDefault(),confirm("Are you sure to delete the comment?")&&v(route("member.forum.comment.destroy",t))};return e("div",{className:`p-6 rounded-xl flex gap-6 bg-opacity-30 shadow-lg flex-wrap lg:flex-nowrap ${d==="thread"?"bg-lightPrimary w-full":"bg-white lg:w-[90%] ml-auto"}`,children:[e("div",{className:"flex",children:[s("div",{className:"w-[48px] mr-3 mt-0.5",children:s("img",{src:`/storage/member/images/${i==null?void 0:i.image}`,alt:""})}),e("div",{children:[s("h4",{className:"text-lg font-bold",children:i==null?void 0:i.business_name}),s("div",{className:"flex gap-2 items-center",children:i!=null&&i.verified_badge_id&&(!(i!=null&&i.expired_verified)||f(i==null?void 0:i.expired_verified).isAfter(f()))?e(y,{children:[s("div",{className:"h-[32px] w-[24px]",children:s("img",{className:"h-full object-contain w-full",src:"/storage/badges/"+((u=i==null?void 0:i.verified_badge)==null?void 0:u.image)})}),e("div",{className:`text-center whitespace-nowrap text-sm ${$((N=i==null?void 0:i.verified_badge)==null?void 0:N.name,"text")}`,children:[(w=i==null?void 0:i.verified_badge)==null?void 0:w.name," Member"]})]}):null})]})]}),s("div",{className:"w-full ",children:d==="input"?e("form",{onSubmit:j,children:[s("div",{className:"font-bold text-sm text-primary mb-2",children:f().format("LLL")}),s(c,{typeForm:"textarea",className:"border mb-4 w-full",row:5,placeholder:"Add Comment",value:F.text,onChange:l=>g("text",l.target.value)}),s(p,{children:h("submit")})]}):e(y,{children:[e("div",{className:"flex justify-between items-center",children:[s("div",{className:"font-bold text-sm text-primary mb-2",children:f(a==null?void 0:a.created_at).format("LLL")}),d!=="thread"&&(r==null?void 0:r.id)===((b=a==null?void 0:a.member)==null?void 0:b.id)&&s(p,{color:"danger",className:"!text-xs",onClick:l=>{L(l,a==null?void 0:a.id)},children:h("delete")})]}),!k.isEmpty(x)&&s("div",{className:"flex justify-center gap-6 mb-5",children:x.map(l=>s("img",{className:"max-h-[200px] object-contain",src:"/storage/threads/images/"+l,alt:""}))}),s("div",{className:"mb-4",children:a==null?void 0:a.text}),(a==null?void 0:a.file)&&e(p,{color:"primary",onClick:l=>C(l,a==null?void 0:a.file),title:a==null?void 0:a.file,children:[s(B,{icon:D,className:"mr-2"})," ",((_=a==null?void 0:a.file)==null?void 0:_.length)>30?((n=a==null?void 0:a.file)==null?void 0:n.slice(0,30))+"....":a==null?void 0:a.file]})]})})]})}export{O as default};
