import{r as S,q as Z,W as ee,j as c,a as s,F as _,t as re}from"./app-261e6d43.js";import{F as h,m as te,p as ne,q as k,o as R}from"./index-732bffe0.js";import{l as ae}from"./lodash-2a128e27.js";import{b as $}from"./BadgeColor-40740503.js";import{I as x}from"./InputLabel-fabc4e39.js";import{T as w}from"./TextInput-935a8ba9.js";import{S as se}from"./SelectInput-27a66ba8.js";import{A as I}from"./id-0f0a146c.js";import{P as u}from"./PrimaryButton-78fc5026.js";import{M as le}from"./MemberLayout-b9de6301.js";import{u as ie}from"./useTranslation-5c07c6a7.js";import"./react-responsive-298e6c6d.js";const T="%[a-f0-9]{2}",D=new RegExp("("+T+")|([^%]+?)","gi"),U=new RegExp("("+T+")+","gi");function C(e,r){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;r=r||1;const n=e.slice(0,r),t=e.slice(r);return Array.prototype.concat.call([],C(n),C(t))}function ce(e){try{return decodeURIComponent(e)}catch{let r=e.match(D)||[];for(let n=1;n<r.length;n++)e=C(r,n).join(""),r=e.match(D)||[];return e}}function oe(e){const r={"%FE%FF":"��","%FF%FE":"��"};let n=U.exec(e);for(;n;){try{r[n[0]]=decodeURIComponent(n[0])}catch{const a=ce(n[0]);a!==n[0]&&(r[n[0]]=a)}n=U.exec(e)}r["%C2"]="�";const t=Object.keys(r);for(const a of t)e=e.replace(new RegExp(a,"g"),r[a]);return e}function de(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return oe(e)}}function q(e,r){if(!(typeof e=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||r==="")return[];const n=e.indexOf(r);return n===-1?[]:[e.slice(0,n),e.slice(n+r.length)]}function me(e,r){const n={};if(Array.isArray(r))for(const t of r){const a=Object.getOwnPropertyDescriptor(e,t);a!=null&&a.enumerable&&Object.defineProperty(n,t,a)}else for(const t of Reflect.ownKeys(e)){const a=Object.getOwnPropertyDescriptor(e,t);if(a.enumerable){const i=e[t];r(t,i,e)&&Object.defineProperty(n,t,a)}}return n}const fe=e=>e==null,ue=e=>encodeURIComponent(e).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`),j=Symbol("encodeFragmentIdentifier");function he(e){switch(e.arrayFormat){case"index":return r=>(n,t)=>{const a=n.length;return t===void 0||e.skipNull&&t===null||e.skipEmptyString&&t===""?n:t===null?[...n,[d(r,e),"[",a,"]"].join("")]:[...n,[d(r,e),"[",d(a,e),"]=",d(t,e)].join("")]};case"bracket":return r=>(n,t)=>t===void 0||e.skipNull&&t===null||e.skipEmptyString&&t===""?n:t===null?[...n,[d(r,e),"[]"].join("")]:[...n,[d(r,e),"[]=",d(t,e)].join("")];case"colon-list-separator":return r=>(n,t)=>t===void 0||e.skipNull&&t===null||e.skipEmptyString&&t===""?n:t===null?[...n,[d(r,e),":list="].join("")]:[...n,[d(r,e),":list=",d(t,e)].join("")];case"comma":case"separator":case"bracket-separator":{const r=e.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(t,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?t:(a=a===null?"":a,t.length===0?[[d(n,e),r,d(a,e)].join("")]:[[t,d(a,e)].join(e.arrayFormatSeparator)])}default:return r=>(n,t)=>t===void 0||e.skipNull&&t===null||e.skipEmptyString&&t===""?n:t===null?[...n,d(r,e)]:[...n,[d(r,e),"=",d(t,e)].join("")]}}function pe(e){let r;switch(e.arrayFormat){case"index":return(n,t,a)=>{if(r=/\[(\d*)]$/.exec(n),n=n.replace(/\[\d*]$/,""),!r){a[n]=t;return}a[n]===void 0&&(a[n]={}),a[n][r[1]]=t};case"bracket":return(n,t,a)=>{if(r=/(\[])$/.exec(n),n=n.replace(/\[]$/,""),!r){a[n]=t;return}if(a[n]===void 0){a[n]=[t];return}a[n]=[...a[n],t]};case"colon-list-separator":return(n,t,a)=>{if(r=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!r){a[n]=t;return}if(a[n]===void 0){a[n]=[t];return}a[n]=[...a[n],t]};case"comma":case"separator":return(n,t,a)=>{const i=typeof t=="string"&&t.includes(e.arrayFormatSeparator),l=typeof t=="string"&&!i&&f(t,e).includes(e.arrayFormatSeparator);t=l?f(t,e):t;const o=i||l?t.split(e.arrayFormatSeparator).map(F=>f(F,e)):t===null?t:f(t,e);a[n]=o};case"bracket-separator":return(n,t,a)=>{const i=/(\[])$/.test(n);if(n=n.replace(/\[]$/,""),!i){a[n]=t&&f(t,e);return}const l=t===null?[]:t.split(e.arrayFormatSeparator).map(o=>f(o,e));if(a[n]===void 0){a[n]=l;return}a[n]=[...a[n],...l]};default:return(n,t,a)=>{if(a[n]===void 0){a[n]=t;return}a[n]=[...[a[n]].flat(),t]}}}function B(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(e,r){return r.encode?r.strict?ue(e):encodeURIComponent(e):e}function f(e,r){return r.decode?de(e):e}function L(e){return Array.isArray(e)?e.sort():typeof e=="object"?L(Object.keys(e)).sort((r,n)=>Number(r)-Number(n)).map(r=>e[r]):e}function M(e){const r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function ge(e){let r="";const n=e.indexOf("#");return n!==-1&&(r=e.slice(n)),r}function v(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function O(e){e=M(e);const r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function A(e,r){r={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...r},B(r.arrayFormatSeparator);const n=pe(r),t=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return t;for(const a of e.split("&")){if(a==="")continue;const i=r.decode?a.replace(/\+/g," "):a;let[l,o]=q(i,"=");l===void 0&&(l=i),o=o===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?o:f(o,r),n(f(l,r),o,t)}for(const[a,i]of Object.entries(t))if(typeof i=="object"&&i!==null)for(const[l,o]of Object.entries(i))i[l]=v(o,r);else t[a]=v(i,r);return r.sort===!1?t:(r.sort===!0?Object.keys(t).sort():Object.keys(t).sort(r.sort)).reduce((a,i)=>{const l=t[i];return l&&typeof l=="object"&&!Array.isArray(l)?a[i]=L(l):a[i]=l,a},Object.create(null))}function V(e,r){if(!e)return"";r={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...r},B(r.arrayFormatSeparator);const n=l=>r.skipNull&&fe(e[l])||r.skipEmptyString&&e[l]==="",t=he(r),a={};for(const[l,o]of Object.entries(e))n(l)||(a[l]=o);const i=Object.keys(a);return r.sort!==!1&&i.sort(r.sort),i.map(l=>{const o=e[l];return o===void 0?"":o===null?d(l,r):Array.isArray(o)?o.length===0&&r.arrayFormat==="bracket-separator"?d(l,r)+"[]":o.reduce(t(l),[]).join("&"):d(l,r)+"="+d(o,r)}).filter(l=>l.length>0).join("&")}function z(e,r){var a;r={decode:!0,...r};let[n,t]=q(e,"#");return n===void 0&&(n=e),{url:((a=n==null?void 0:n.split("?"))==null?void 0:a[0])??"",query:A(O(e),r),...r&&r.parseFragmentIdentifier&&t?{fragmentIdentifier:f(t,r)}:{}}}function H(e,r){r={encode:!0,strict:!0,[j]:!0,...r};const n=M(e.url).split("?")[0]||"",t=O(e.url),a={...A(t,{sort:!1}),...e.query};let i=V(a,r);i&&(i=`?${i}`);let l=ge(e.url);if(e.fragmentIdentifier){const o=new URL(n);o.hash=e.fragmentIdentifier,l=r[j]?o.hash:`#${e.fragmentIdentifier}`}return`${n}${i}${l}`}function K(e,r,n){n={parseFragmentIdentifier:!0,[j]:!1,...n};const{url:t,query:a,fragmentIdentifier:i}=z(e,n);return H({url:t,query:me(a,r),fragmentIdentifier:i},n)}function ye(e,r,n){const t=Array.isArray(r)?a=>!r.includes(a):(a,i)=>!r(a,i);return K(e,t,n)}const be=Object.freeze(Object.defineProperty({__proto__:null,exclude:ye,extract:O,parse:A,parseUrl:z,pick:K,stringify:V,stringifyUrl:H},Symbol.toStringTag,{value:"Module"}));function Pe({member:e,scores:r,lastSession:n}){const{t}=ie(),[a,i]=S.useState(!1),[l,o]=S.useState(!1),F=be.parse(location.search),{flash:E}=Z().props,P=[{label:"Green/Publish Rate IDR 0 - 1.500.000",value:2e6},{label:"Branch/Publish Rate IDR 1.500.001 - 3.000.000",value:6e6},{label:"Root/Publish Rate Above IDR 3.000.000",value:12e6}],{data:g,setData:y,post:G,processing:W,errors:b,reset:J}=ee({no_rooms:null,no_employees:null,no_outlets:null,total_payment:P[0].value}),Q=sessionStorage.getItem("paid"),X=()=>{let m=sessionStorage.getItem("snapToken");const p=N=>{snap.pay(N,{onSuccess:function(){i(!0),o(!1),sessionStorage.clear("snapToken"),sessionStorage.setItem("paid",!0),re.visit("/member/dashboard?newPayment=true")},onPending:function(){o(!0)},onError:function(){o(!1),sessionStorage.clear("snapToken")},onClose:function(){o(!0)}})};m?p(m):axios.post(route("member_payment.new_payment"),{}).then(function(N){sessionStorage.setItem("snapToken",N.data),p(N.data)})};S.useEffect(()=>{F.newPayment&&i(!0)},[]);const Y=m=>{m.preventDefault();debugger;G(route("member.store"),{onSuccess:()=>{J()}})};return c(le,{children:[a||Q?s("div",{className:"px-4 py-3 bg-primary text-white rounded-md inline-flex mb-4",children:t("pay_complete")}):null,l&&s("div",{className:"px-4 py-3 bg-yellow-300 rounded-md inline-flex mb-4 transition",children:t("pay_pending")}),E.success&&s("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-xl relative mb-3",children:s("span",{className:"inline",children:E.success})}),c("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[c(I,{children:[s("h2",{className:"font-bold text-[20px] mb-4",children:t("welcome_member")}),s("div",{children:c(u,{as:"link",href:route("member.profile"),className:"mb-4 !inline-block",color:"lightPrimary",children:[t("edit_profile"),s(h,{className:"ml-2",icon:te})]})}),e.status==="active"&&s("div",{children:c(u,{className:"!inline-block",as:"link",href:route("member.module.index"),color:"lightSecondary",children:[t("start_learning"),s(h,{icon:ne,className:"ml-2"})]})})]}),s(I,{children:e.status==="active"?c(_,{children:[e&&e.badge?c("h2",{className:"font-bold text-[20px] mb-4",children:[t("your_assessment"),s("span",{className:$(e.badge.name,"text")+" ml-1.5",children:e.badge.name})]}):s("h2",{className:"font-bold text-[20px] mb-4",children:t("no_assessment")}),e&&e.badge?c("div",{className:"flex items-center",children:[c("div",{className:"flex flex-col items-center mr-4 uppercase mb-1",children:[s("div",{children:s("img",{className:"max-h-[120px]",src:"/storage/badges/"+e.badge.image})}),c("div",{className:`font-bold mt-1 text-center whitespace-nowrap   ${$(e.badge.name,"text")}`,children:[e.badge.name," Badge"]})]}),c("div",{className:"ml-2",children:[n&&c("div",{className:" mb-3",children:[s("span",{className:"font-bold",children:n.total_score})," ",s("span",{className:" uppercase",children:"Points"})]}),r==null?void 0:r.map(m=>{var p;return c("div",{className:"flex justify-center text-gray-500 text-sm mb-1",children:[s("div",{className:"capitalize",children:ae.lowerCase((p=m==null?void 0:m.assessment)==null?void 0:p.title).slice(0,11)}),s("div",{className:"mx-1",children:"-"}),s("div",{children:m==null?void 0:m.score})]})})]})]}):c("div",{className:"grid gap-4",children:[c(u,{color:"lightPrimary",children:[t("start_assessment"),s(h,{icon:k,className:"ml-2"})]}),c(u,{color:"lightSecondary",className:"text-left",children:[t("learn_more_assessment"),s(h,{icon:R,className:"ml-2"})]})]})]}):c("div",{children:[s("h2",{className:"font-bold text-[20px] mb-4",children:t("preview_member")}),c("div",{className:"grid gap-4",children:[s("div",{children:c(u,{color:"lightPrimary",as:"link",href:route("member.assessment.index"),children:[t("my_assessment"),s(h,{icon:k,className:"ml-2"})]})}),s("div",{children:c(u,{color:"lightSecondary",as:"link",href:route("member.module.index"),children:[t("e_learning"),s(h,{icon:R,className:"ml-2"})]})})]})]})})]}),e.status!=="active"&&c(I,{className:"flex flex-col items-center justify-center gap-4",children:[s("h2",{className:"font-bold text-xl",children:t("member_not_active")}),e.status==="payment"&&e.total_payment?c(_,{children:[s("p",{className:"text-sm",children:t("member_locked_text")}),s(u,{onClick:()=>e.status!=="active"?X():null,children:t("member_locked_button")})]}):e.status==="waiting_approval"?s(_,{children:s("p",{className:"text-sm",children:t("member_not_approved")})}):c(_,{children:[s("p",{className:"mb-4",children:t("notify_admin_text")}),c("form",{className:"grid lg:grid-cols-2 gap-4",onSubmit:Y,children:[c("div",{className:"block  items-center",children:[s("div",{className:"mb-2",children:s(x,{htmlFor:"no_rooms",value:t("form_label_no_rooms")})}),c("div",{className:"lg:w-4/5",children:[s(w,{id:"no_rooms",name:"no_rooms",type:"number",min:0,value:g.no_rooms,className:"block w-full",isFocused:!0,onChange:m=>y("no_rooms",m.target.value)}),s("span",{className:"text-red-600",children:b.no_rooms})]})]}),c("div",{className:"block  items-center",children:[s("div",{className:"mb-2",children:s(x,{htmlFor:"no_outlet",value:t("form_label_no_outlet")})}),c("div",{className:"lg:w-4/5",children:[s(w,{id:"no_outlets",name:"no_outlets",type:"number",min:0,value:g.no_outlets,className:"block w-full",isFocused:!0,onChange:m=>y("no_outlets",m.target.value)}),s("span",{className:"text-red-600",children:b.no_outlets})]})]}),c("div",{className:"block  items-center",children:[s("div",{className:"mb-2",children:s(x,{htmlFor:"no_employees",value:t("form_label_no_employees")})}),c("div",{className:"lg:w-4/5",children:[s(w,{id:"no_employees",name:"no_employees",type:"number",min:0,value:g.no_employees,className:"block w-full",isFocused:!0,onChange:m=>y("no_employees",m.target.value)}),s("span",{className:"text-red-600",children:b.no_employees})]})]}),c("div",{className:"block  items-center",children:[s("div",{className:"mb-2",children:s(x,{htmlFor:"total_payment",value:t("form_label_total_payment")})}),c("div",{className:"lg:w-4/5",children:[s(se,{id:"total_payment",name:"total_payment",value:g.total_payment,options:P,className:"w-full",onChange:m=>y("total_payment",m.target.value)}),s("span",{className:"text-red-600",children:b.total_payment})]})]}),s(u,{color:"secondary",type:"submit",className:"w-fit",disabled:W,children:t("submit")})]})]})]})]})}export{Pe as default};
